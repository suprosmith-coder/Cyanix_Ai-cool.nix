<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyanix AI - ChatGPT Alternative</title>
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0d0221">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Cyanix AI">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <meta name="description" content="Cyanix AI - Advanced ChatGPT-like AI assistant with secure authentication">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --cyan-primary: #00f3ff;
            --cyan-secondary: #00a8b5;
            --cyan-light: #6bffff;
            --purple-dark: #0d0221;
            --purple-deep: #1a0633;
            --gray-dark: #1e1e2e;
            --gray-medium: #2d2d3a;
            --gray-light: #f5f5f7;
            --white: #ffffff;
            --neon-glow: 0 0 10px var(--cyan-primary), 0 0 20px var(--cyan-primary), 0 0 30px var(--cyan-primary);
            --card-shadow: 0 8px 32px rgba(0, 243, 255, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--purple-dark);
            color: var(--white);
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--purple-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease-out 2s forwards;
        }

        .splash-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            box-shadow: var(--neon-glow);
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        .splash-title {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .splash-subtitle {
            font-size: 16px;
            color: var(--cyan-light);
            opacity: 0.8;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }

        /* Auth Container */
        .auth-container {
            display: flex;
            min-height: 100vh;
        }

        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, var(--purple-dark), var(--purple-deep));
            padding: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .auth-left::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(157, 78, 221, 0.1) 0%, transparent 50%);
        }

        .auth-right {
            flex: 1;
            background: var(--gray-dark);
            padding: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .auth-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--neon-glow);
        }

        .logo-text {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-title {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .auth-subtitle {
            font-size: 18px;
            color: var(--cyan-light);
            opacity: 0.8;
            margin-bottom: 40px;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--cyan-light);
            font-size: 14px;
        }

        .feature-icon {
            color: var(--cyan-primary);
            font-size: 20px;
        }

        /* Auth Forms */
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
            width: 100%;
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
            background: var(--gray-medium);
            padding: 6px;
            border-radius: 12px;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 16px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .auth-tab.active {
            background: var(--cyan-primary);
            color: var(--purple-dark);
            box-shadow: var(--neon-glow);
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--cyan-light);
        }

        .form-input {
            width: 100%;
            padding: 16px;
            background: var(--gray-medium);
            border: 2px solid transparent;
            border-radius: 12px;
            font-size: 16px;
            color: var(--white);
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--cyan-primary);
            box-shadow: 0 0 0 3px rgba(0, 243, 255, 0.1);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .password-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--cyan-light);
            cursor: pointer;
        }

        .password-wrapper {
            position: relative;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--cyan-light);
        }

        .checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--cyan-primary);
            border-radius: 4px;
            cursor: pointer;
        }

        .forgot-password {
            color: var(--cyan-primary);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .auth-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            color: var(--purple-dark);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
            box-shadow: var(--neon-glow);
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.4);
        }

        .auth-btn:active {
            transform: translateY(0);
        }

        .auth-divider {
            display: flex;
            align-items: center;
            margin: 30px 0;
            color: var(--cyan-light);
            font-size: 14px;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--gray-medium);
        }

        .auth-divider span {
            padding: 0 20px;
        }

        .social-auth {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 30px;
        }

        .social-btn {
            padding: 16px;
            background: var(--gray-medium);
            border: 2px solid transparent;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 18px;
            color: var(--white);
        }

        .social-btn:hover {
            border-color: var(--cyan-primary);
            transform: translateY(-2px);
        }

        .google-btn {
            color: #4285F4;
        }

        .microsoft-btn {
            color: #00A4EF;
        }

        .email-btn {
            color: var(--cyan-primary);
        }

        .auth-footer {
            text-align: center;
            color: var(--cyan-light);
            font-size: 14px;
        }

        .auth-footer a {
            color: var(--cyan-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Terms Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--gray-dark);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--card-shadow);
            border: 2px solid var(--cyan-primary);
        }

        .modal-header {
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 10px;
        }

        .modal-subtitle {
            color: var(--cyan-light);
            font-size: 14px;
            opacity: 0.8;
        }

        .modal-content {
            color: var(--cyan-light);
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .modal-content p {
            margin-bottom: 15px;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-btn.primary {
            background: var(--cyan-primary);
            color: var(--purple-dark);
            border: none;
        }

        .modal-btn.secondary {
            background: transparent;
            color: var(--cyan-light);
            border: 2px solid var(--gray-medium);
        }

        /* Chat Interface */
        .chat-container {
            display: none;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .chat-container.active {
            display: block;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100%;
            background: var(--purple-deep);
            border-right: 1px solid rgba(0, 243, 255, 0.1);
            display: flex;
            flex-direction: column;
            z-index: 100;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: var(--neon-glow);
        }

        .sidebar-logo-text {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sidebar-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .new-chat-btn {
            width: 100%;
            padding: 14px;
            background: var(--cyan-primary);
            color: var(--purple-dark);
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--neon-glow);
        }

        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.4);
        }

        .history-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--cyan-light);
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }

        .conversation-list {
            list-style: none;
        }

        .conversation-item {
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            color: var(--cyan-light);
        }

        .conversation-item:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .conversation-item.active {
            background: rgba(0, 243, 255, 0.2);
            color: var(--cyan-primary);
        }

        .conversation-icon {
            font-size: 18px;
        }

        .conversation-text {
            flex: 1;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(0, 243, 255, 0.1);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-profile:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--purple-dark);
            font-size: 16px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--white);
            margin-bottom: 2px;
        }

        .user-email {
            font-size: 12px;
            color: var(--cyan-light);
            opacity: 0.7;
        }

        .user-menu-btn {
            background: none;
            border: none;
            color: var(--cyan-light);
            cursor: pointer;
            font-size: 18px;
        }

        /* Main Chat Area */
        .main-chat {
            margin-left: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: margin-left 0.3s ease;
        }

        .main-chat.sidebar-active {
            margin-left: 260px;
        }

        .chat-header {
            padding: 20px;
            background: rgba(13, 2, 33, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--cyan-primary);
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .chat-title {
            flex: 1;
            font-size: 18px;
            font-weight: 600;
            color: var(--white);
        }

        .chat-actions {
            display: flex;
            gap: 10px;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            background: rgba(0, 243, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: var(--cyan-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: var(--transition);
        }

        .header-btn:hover {
            background: rgba(0, 243, 255, 0.2);
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px 20px;
            background: var(--purple-dark);
        }

        .welcome-screen {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding-top: 60px;
        }

        .welcome-icon {
            font-size: 64px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-title {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: var(--cyan-light);
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }

        .example-prompts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            max-width: 600px;
            margin: 40px auto;
        }

        .example-prompt {
            padding: 20px;
            background: rgba(0, 243, 255, 0.05);
            border: 1px solid rgba(0, 243, 255, 0.1);
            border-radius: 12px;
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
        }

        .example-prompt:hover {
            background: rgba(0, 243, 255, 0.1);
            transform: translateY(-2px);
        }

        .example-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--cyan-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-text {
            font-size: 14px;
            color: var(--cyan-light);
            opacity: 0.9;
        }

        .message {
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 20px;
            animation: messageAppear 0.3s ease;
        }

        .message.user {
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(0, 168, 181, 0.05));
            border-radius: 18px;
            border: 1px solid rgba(0, 243, 255, 0.2);
        }

        .message.assistant {
            background: rgba(0, 243, 255, 0.03);
            border-radius: 18px;
            border: 1px solid rgba(0, 243, 255, 0.1);
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .message-avatar.user {
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            color: var(--purple-dark);
        }

        .message-avatar.assistant {
            background: linear-gradient(135deg, #9d4edd, #5a189a);
            color: var(--white);
        }

        .message-sender {
            font-size: 14px;
            font-weight: 600;
            color: var(--white);
        }

        .message-time {
            font-size: 12px;
            color: var(--cyan-light);
            opacity: 0.7;
            margin-left: auto;
        }

        .message-content {
            font-size: 16px;
            line-height: 1.6;
            color: var(--cyan-light);
        }

        .message-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .message-action {
            background: none;
            border: none;
            color: var(--cyan-light);
            cursor: pointer;
            font-size: 16px;
            padding: 6px;
            border-radius: 6px;
            transition: var(--transition);
        }

        .message-action:hover {
            background: rgba(0, 243, 255, 0.1);
            color: var(--cyan-primary);
        }

        .typing-indicator {
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 20px;
            background: rgba(0, 243, 255, 0.03);
            border-radius: 18px;
            border: 1px solid rgba(0, 243, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .typing-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #9d4edd, #5a189a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 14px;
            font-weight: 600;
        }

        .typing-dots {
            display: flex;
            gap: 8px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--cyan-primary);
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        .input-container {
            padding: 20px;
            background: rgba(13, 2, 33, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 243, 255, 0.1);
        }

        .input-wrapper {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .chat-input {
            width: 100%;
            min-height: 56px;
            max-height: 200px;
            padding: 16px 70px 16px 20px;
            background: rgba(0, 243, 255, 0.05);
            border: 2px solid rgba(0, 243, 255, 0.2);
            border-radius: 16px;
            font-size: 16px;
            color: var(--white);
            resize: none;
            transition: var(--transition);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--cyan-primary);
            box-shadow: 0 0 0 3px rgba(0, 243, 255, 0.1);
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-buttons {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
        }

        .input-btn {
            width: 40px;
            height: 40px;
            background: rgba(0, 243, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: var(--cyan-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: var(--transition);
        }

        .input-btn:hover {
            background: rgba(0, 243, 255, 0.2);
        }

        .input-btn.send {
            background: linear-gradient(135deg, var(--cyan-secondary), var(--cyan-primary));
            color: var(--purple-dark);
            box-shadow: var(--neon-glow);
        }

        .input-btn.send:hover {
            transform: scale(1.1);
        }

        /* User Menu */
        .user-menu {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: var(--purple-deep);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.1);
            min-width: 200px;
            z-index: 1000;
            display: none;
        }

        .user-menu.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        .menu-item {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--cyan-light);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: rgba(0, 243, 255, 0.1);
            color: var(--cyan-primary);
        }

        .menu-item.danger {
            color: #ff4757;
        }

        .menu-item.danger:hover {
            background: rgba(255, 71, 87, 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
            }

            .auth-left,
            .auth-right {
                padding: 40px 20px;
            }

            .features-list {
                grid-template-columns: 1fr;
            }

            .sidebar {
                width: 100%;
                transform: translateX(-100%);
            }

            .main-chat.sidebar-active {
                margin-left: 0;
            }

            .example-prompts {
                grid-template-columns: 1fr;
            }

            .welcome-title {
                font-size: 32px;
            }

            .welcome-subtitle {
                font-size: 16px;
            }
        }

        /* Animations */
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-logo">
            <i class="fas fa-robot"></i>
        </div>
        <h1 class="splash-title">Cyanix AI</h1>
        <p class="splash-subtitle">Loading your AI assistant...</p>
    </div>

    <!-- Auth Container -->
    <div id="authContainer" class="auth-container">
        <div class="auth-left">
            <div class="auth-logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">Cyanix AI</div>
            </div>
            
            <h1 class="auth-title">Welcome to the Future of AI Conversation</h1>
            <p class="auth-subtitle">Experience ChatGPT-level intelligence with enhanced privacy and control</p>
            
            <div class="features-list">
                <div class="feature-item">
                    <i class="fas fa-bolt feature-icon"></i>
                    <span>Instant Responses</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt feature-icon"></i>
                    <span>End-to-End Encryption</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-history feature-icon"></i>
                    <span>Unlimited Conversation History</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-mobile-alt feature-icon"></i>
                    <span>Cross-Platform Sync</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-code feature-icon"></i>
                    <span>Code Execution Support</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-file-export feature-icon"></i>
                    <span>Export Conversations</span>
                </div>
            </div>
        </div>
        
        <div class="auth-right">
            <div class="auth-form" id="authForm">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchAuthTab('signin')">Sign In</button>
                    <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>
                
                <!-- Sign In Form -->
                <div id="signinForm" class="auth-form-content">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" id="signinEmail" class="form-input" placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="signinPassword" class="form-input" placeholder="Enter your password">
                            <button class="password-toggle" type="button" onclick="togglePassword('signinPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe" class="checkbox">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="forgot-password" onclick="showForgotPassword()">Forgot Password?</a>
                    </div>
                    
                    <button class="auth-btn" onclick="signInWithEmail()">Sign In</button>
                    
                    <div class="auth-divider">
                        <span>Or continue with</span>
                    </div>
                    
                    <div class="social-auth">
                        <button class="social-btn google-btn" onclick="signInWithGoogle()">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="social-btn microsoft-btn" onclick="signInWithMicrosoft()">
                            <i class="fab fa-microsoft"></i>
                        </button>
                        <button class="social-btn email-btn" onclick="signInWithEmail()">
                            <i class="fas fa-envelope"></i>
                        </button>
                    </div>
                    
                    <p class="auth-footer">
                        Don't have an account? <a href="#" onclick="switchAuthTab('signup')">Sign Up</a>
                    </p>
                </div>
                
                <!-- Sign Up Form -->
                <div id="signupForm" class="auth-form-content" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="signupName" class="form-input" placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" id="signupEmail" class="form-input" placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="signupPassword" class="form-input" placeholder="Create a password">
                            <button class="password-toggle" type="button" onclick="togglePassword('signupPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="signupConfirmPassword" class="form-input" placeholder="Confirm your password">
                            <button class="password-toggle" type="button" onclick="togglePassword('signupConfirmPassword')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="remember-me">
                            <input type="checkbox" id="acceptTerms" class="checkbox">
                            <span>I agree to the <a href="#" class="forgot-password" onclick="showTermsModal()">Terms & Privacy</a></span>
                        </label>
                    </div>
                    
                    <button class="auth-btn" onclick="signUpWithEmail()">Create Account</button>
                    
                    <div class="auth-divider">
                        <span>Or sign up with</span>
                    </div>
                    
                    <div class="social-auth">
                        <button class="social-btn google-btn" onclick="signUpWithGoogle()">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="social-btn microsoft-btn" onclick="signUpWithMicrosoft()">
                            <i class="fab fa-microsoft"></i>
                        </button>
                        <button class="social-btn email-btn" onclick="signUpWithEmail()">
                            <i class="fas fa-envelope"></i>
                        </button>
                    </div>
                    
                    <p class="auth-footer">
                        Already have an account? <a href="#" onclick="switchAuthTab('signin')">Sign In</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms & Privacy Modal -->
    <div id="termsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Terms & Privacy Policy</h2>
                <p class="modal-subtitle">Last updated: January 2024</p>
            </div>
            <div class="modal-content">
                <p>By using Cyanix AI, you agree to our terms and privacy policy.</p>
                <p><strong>Data Privacy:</strong> We encrypt all your conversations end-to-end. Your data never leaves your device unless you explicitly choose to sync across devices.</p>
                <p><strong>Usage Policy:</strong> You agree to use Cyanix AI responsibly and not for any illegal activities, harassment, or generating harmful content.</p>
                <p><strong>Intellectual Property:</strong> You retain all rights to the content you create with Cyanix AI. We claim no ownership over your generated content.</p>
                <p><strong>Service Availability:</strong> We strive for 99.9% uptime but cannot guarantee uninterrupted service.</p>
                <p><strong>Changes to Terms:</strong> We may update these terms periodically. Continued use after changes constitutes acceptance.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary" onclick="hideTermsModal()">Cancel</button>
                <button class="modal-btn primary" onclick="acceptTerms()">I Accept</button>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Reset Password</h2>
                <p class="modal-subtitle">Enter your email to receive reset instructions</p>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="resetEmail" class="form-input" placeholder="Enter your email">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary" onclick="hideForgotPassword()">Cancel</button>
                <button class="modal-btn primary" onclick="sendResetEmail()">Send Reset Link</button>
            </div>
        </div>
    </div>

    <!-- Chat Interface -->
    <div id="chatContainer" class="chat-container">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="sidebar-logo-text">Cyanix AI</div>
                </div>
            </div>
            
            <div class="sidebar-content">
                <button class="new-chat-btn" onclick="newChat()">
                    <i class="fas fa-plus"></i>
                    New Chat
                </button>
                
                <div class="history-section">
                    <div class="section-title">Today</div>
                    <ul class="conversation-list" id="todayConversations">
                        <!-- Today's conversations will be added here -->
                    </ul>
                </div>
                
                <div class="history-section">
                    <div class="section-title">Yesterday</div>
                    <ul class="conversation-list" id="yesterdayConversations">
                        <!-- Yesterday's conversations will be added here -->
                    </ul>
                </div>
                
                <div class="history-section">
                    <div class="section-title">Previous 7 Days</div>
                    <ul class="conversation-list" id="weekConversations">
                        <!-- Week's conversations will be added here -->
                    </ul>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-profile" onclick="toggleUserMenu()">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">User</div>
                        <div class="user-email" id="userEmail">user@example.com</div>
                    </div>
                    <button class="user-menu-btn">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- User Menu -->
        <div id="userMenu" class="user-menu">
            <div class="menu-item" onclick="showProfile()">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </div>
            <div class="menu-item" onclick="showSettings()">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
            <div class="menu-item" onclick="showUpgrade()">
                <i class="fas fa-crown"></i>
                <span>Upgrade to Pro</span>
            </div>
            <div class="menu-item" onclick="exportData()">
                <i class="fas fa-download"></i>
                <span>Export Data</span>
            </div>
            <div class="menu-item danger" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-chat" id="mainChat">
            <div class="chat-header">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="chat-title" id="chatTitle">New Chat</div>
                <div class="chat-actions">
                    <button class="header-btn" onclick="clearChat()">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                    <button class="header-btn" onclick="shareChat()">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button class="header-btn" onclick="toggleDarkMode()">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <!-- Welcome Screen -->
                <div id="welcomeScreen" class="welcome-screen">
                    <div class="welcome-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h1 class="welcome-title">How can I help you today?</h1>
                    <p class="welcome-subtitle">
                        I'm Cyanix AI, your intelligent assistant. I can help with writing, analysis, coding, 
                        creative tasks, and much more. What would you like to explore?
                    </p>
                    
                    <div class="example-prompts">
                        <div class="example-prompt" onclick="useExample('brainstorm')">
                            <div class="example-title">
                                <i class="fas fa-lightbulb"></i>
                                Brainstorm ideas
                            </div>
                            <div class="example-text">"Help me brainstorm creative project ideas for a tech startup"</div>
                        </div>
                        <div class="example-prompt" onclick="useExample('explain')">
                            <div class="example-title">
                                <i class="fas fa-book"></i>
                                Explain concepts
                            </div>
                            <div class="example-text">"Explain quantum computing in simple terms"</div>
                        </div>
                        <div class="example-prompt" onclick="useExample('code')">
                            <div class="example-title">
                                <i class="fas fa-code"></i>
                                Write code
                            </div>
                            <div class="example-text">"Write a Python function to sort a list using quicksort"</div>
                        </div>
                        <div class="example-prompt" onclick="useExample('analyze')">
                            <div class="example-title">
                                <i class="fas fa-chart-line"></i>
                                Analyze data
                            </div>
                            <div class="example-text">"Analyze the pros and cons of renewable energy sources"</div>
                        </div>
                    </div>
                </div>
                
                <!-- Messages will be inserted here -->
            </div>
            
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        class="chat-input" 
                        placeholder="Message Cyanix AI..."
                        rows="1"
                        oninput="autoResizeInput(this)"
                        onkeydown="handleKeyDown(event)"
                    ></textarea>
                    <div class="input-buttons">
                        <button class="input-btn" onclick="attachFile()">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-btn" onclick="voiceInput()">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="input-btn send" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== APP STATE ====================
        let currentUser = null;
        let currentChatId = null;
        let conversations = [];
        let isSidebarOpen = false;
        let isDarkMode = true;
        let userMenuOpen = false;

        // Mock database for demo purposes
        const mockDatabase = {
            users: [],
            conversations: [],
            messages: []
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });

        function initApp() {
            // Hide splash screen after delay
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                
                // Check if user is already logged in
                const savedUser = localStorage.getItem('cyanix_user');
                if (savedUser) {
                    currentUser = JSON.parse(savedUser);
                    showChatInterface();
                    loadConversations();
                }
            }, 2000);
            
            // Initialize form event listeners
            initializeAuthForms();
        }

        // ==================== AUTHENTICATION ====================
        function initializeAuthForms() {
            // Add enter key support for forms
            document.getElementById('signinEmail')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') signInWithEmail();
            });
            
            document.getElementById('signinPassword')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') signInWithEmail();
            });
            
            document.getElementById('signupEmail')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') signUpWithEmail();
            });
            
            document.getElementById('signupPassword')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') signUpWithEmail();
            });
        }

        function switchAuthTab(tab) {
            const signinTab = document.querySelector('[onclick="switchAuthTab(\'signin\')"]');
            const signupTab = document.querySelector('[onclick="switchAuthTab(\'signup\')"]');
            const signinForm = document.getElementById('signinForm');
            const signupForm = document.getElementById('signupForm');
            
            if (tab === 'signin') {
                signinTab.classList.add('active');
                signupTab.classList.remove('active');
                signinForm.style.display = 'block';
                signupForm.style.display = 'none';
            } else {
                signinTab.classList.remove('active');
                signupTab.classList.add('active');
                signinForm.style.display = 'none';
                signupForm.style.display = 'block';
            }
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const toggle = input.nextElementSibling.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                toggle.classList.remove('fa-eye');
                toggle.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                toggle.classList.remove('fa-eye-slash');
                toggle.classList.add('fa-eye');
            }
        }

        // ==================== EMAIL AUTHENTICATION ====================
        function signInWithEmail() {
            const email = document.getElementById('signinEmail').value.trim();
            const password = document.getElementById('signinPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (!validateEmail(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            // Show loading
            const btn = document.querySelector('#signinForm .auth-btn');
            const originalText = btn.textContent;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
            btn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Check mock database or create new user
                let user = mockDatabase.users.find(u => u.email === email);
                
                if (user && user.password === password) {
                    // Successful login
                    currentUser = {
                        id: user.id,
                        name: user.name,
                        email: user.email,
                        avatar: user.avatar,
                        plan: user.plan || 'free',
                        createdAt: user.createdAt
                    };
                    
                    // Save user session
                    if (rememberMe) {
                        localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                    } else {
                        sessionStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                    }
                    
                    showChatInterface();
                    loadConversations();
                    showToast('Welcome back!', 'success');
                } else {
                    showToast('Invalid email or password', 'error');
                }
                
                // Reset button
                btn.textContent = originalText;
                btn.disabled = false;
            }, 1500);
        }

        function signUpWithEmail() {
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const acceptTerms = document.getElementById('acceptTerms').checked;
            
            // Validation
            if (!name) {
                showToast('Please enter your name', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (!acceptTerms) {
                showToast('Please accept the terms and privacy policy', 'error');
                return;
            }
            
            // Check if user already exists
            if (mockDatabase.users.some(u => u.email === email)) {
                showToast('An account with this email already exists', 'error');
                return;
            }
            
            // Show loading
            const btn = document.querySelector('#signupForm .auth-btn');
            const originalText = btn.textContent;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
            btn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Create new user
                const newUser = {
                    id: 'user_' + Date.now(),
                    name: name,
                    email: email,
                    password: password, // In real app, this would be hashed
                    avatar: getAvatarInitials(name),
                    plan: 'free',
                    createdAt: new Date().toISOString(),
                    provider: 'email'
                };
                
                mockDatabase.users.push(newUser);
                currentUser = { ...newUser };
                delete currentUser.password;
                
                // Save user session
                localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                
                showChatInterface();
                showWelcomeMessage();
                showToast('Account created successfully!', 'success');
                
                // Reset button
                btn.textContent = originalText;
                btn.disabled = false;
            }, 2000);
        }

        // ==================== SOCIAL AUTHENTICATION ====================
        function signInWithGoogle() {
            // In a real app, this would integrate with Google OAuth
            // For demo, we'll simulate the process
            showToast('Redirecting to Google authentication...', 'info');
            
            setTimeout(() => {
                // Simulate Google user data
                const googleUser = {
                    id: 'google_' + Date.now(),
                    name: 'Demo User',
                    email: 'demo@example.com',
                    avatar: 'G',
                    plan: 'free',
                    provider: 'google'
                };
                
                // Check if user exists
                let user = mockDatabase.users.find(u => u.email === googleUser.email);
                if (!user) {
                    user = {
                        ...googleUser,
                        createdAt: new Date().toISOString()
                    };
                    mockDatabase.users.push(user);
                }
                
                currentUser = { ...user };
                delete currentUser.password;
                
                localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                showChatInterface();
                loadConversations();
                showToast('Signed in with Google', 'success');
            }, 1500);
        }

        function signUpWithGoogle() {
            // Same as sign in for social providers (they handle both)
            signInWithGoogle();
        }

        function signInWithMicrosoft() {
            showToast('Redirecting to Microsoft authentication...', 'info');
            
            setTimeout(() => {
                // Simulate Microsoft user data
                const microsoftUser = {
                    id: 'microsoft_' + Date.now(),
                    name: 'Business User',
                    email: 'business@example.com',
                    avatar: 'M',
                    plan: 'free',
                    provider: 'microsoft'
                };
                
                // Check if user exists
                let user = mockDatabase.users.find(u => u.email === microsoftUser.email);
                if (!user) {
                    user = {
                        ...microsoftUser,
                        createdAt: new Date().toISOString()
                    };
                    mockDatabase.users.push(user);
                }
                
                currentUser = { ...user };
                delete currentUser.password;
                
                localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                showChatInterface();
                loadConversations();
                showToast('Signed in with Microsoft', 'success');
            }, 1500);
        }

        function signUpWithMicrosoft() {
            signInWithMicrosoft();
        }

        // ==================== CHAT INTERFACE ====================
        function showChatInterface() {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('chatContainer').classList.add('active');
            
            // Update user info
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userAvatar').textContent = currentUser.avatar;
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainChat = document.getElementById('mainChat');
            
            isSidebarOpen = !isSidebarOpen;
            
            if (isSidebarOpen) {
                sidebar.classList.add('active');
                mainChat.classList.add('sidebar-active');
            } else {
                sidebar.classList.remove('active');
                mainChat.classList.remove('sidebar-active');
            }
        }

        function toggleUserMenu() {
            const userMenu = document.getElementById('userMenu');
            userMenuOpen = !userMenuOpen;
            
            if (userMenuOpen) {
                userMenu.classList.add('active');
                // Close menu when clicking outside
                setTimeout(() => {
                    document.addEventListener('click', closeUserMenuOnClickOutside);
                }, 10);
            } else {
                userMenu.classList.remove('active');
                document.removeEventListener('click', closeUserMenuOnClickOutside);
            }
        }

        function closeUserMenuOnClickOutside(event) {
            const userMenu = document.getElementById('userMenu');
            const userProfile = document.querySelector('.user-profile');
            
            if (!userMenu.contains(event.target) && !userProfile.contains(event.target)) {
                userMenu.classList.remove('active');
                userMenuOpen = false;
                document.removeEventListener('click', closeUserMenuOnClickOutside);
            }
        }

        function newChat() {
            currentChatId = 'chat_' + Date.now();
            document.getElementById('messagesContainer').innerHTML = '';
            document.getElementById('chatTitle').textContent = 'New Chat';
            
            // Show welcome screen
            const welcomeScreen = document.getElementById('welcomeScreen').cloneNode(true);
            welcomeScreen.style.display = 'block';
            document.getElementById('messagesContainer').appendChild(welcomeScreen);
            
            // Add to conversations
            const conversation = {
                id: currentChatId,
                title: 'New Chat',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                messages: []
            };
            
            conversations.unshift(conversation);
            updateConversationList();
            
            if (isSidebarOpen) toggleSidebar();
        }

        function loadConversations() {
            // Load from mock database or localStorage
            const savedConversations = localStorage.getItem(`cyanix_conversations_${currentUser.id}`);
            if (savedConversations) {
                conversations = JSON.parse(savedConversations);
                updateConversationList();
            } else {
                // Create demo conversations for new users
                conversations = [
                    {
                        id: 'chat_1',
                        title: 'Python Programming Help',
                        createdAt: new Date(Date.now() - 3600000).toISOString(),
                        updatedAt: new Date(Date.now() - 3600000).toISOString(),
                        messages: []
                    },
                    {
                        id: 'chat_2',
                        title: 'Business Idea Brainstorming',
                        createdAt: new Date(Date.now() - 86400000).toISOString(),
                        updatedAt: new Date(Date.now() - 86400000).toISOString(),
                        messages: []
                    },
                    {
                        id: 'chat_3',
                        title: 'Learning Quantum Computing',
                        createdAt: new Date(Date.now() - 172800000).toISOString(),
                        updatedAt: new Date(Date.now() - 172800000).toISOString(),
                        messages: []
                    }
                ];
                updateConversationList();
            }
        }

        function updateConversationList() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            const weekAgo = new Date(today);
            weekAgo.setDate(weekAgo.getDate() - 7);
            
            const todayConvos = conversations.filter(c => new Date(c.updatedAt) >= today);
            const yesterdayConvos = conversations.filter(c => 
                new Date(c.updatedAt) >= yesterday && new Date(c.updatedAt) < today
            );
            const weekConvos = conversations.filter(c => 
                new Date(c.updatedAt) >= weekAgo && new Date(c.updatedAt) < yesterday
            );
            
            updateConversationSection('todayConversations', todayConvos);
            updateConversationSection('yesterdayConversations', yesterdayConvos);
            updateConversationSection('weekConversations', weekConvos);
        }

        function updateConversationSection(sectionId, convos) {
            const section = document.getElementById(sectionId);
            section.innerHTML = '';
            
            convos.forEach(convo => {
                const li = document.createElement('li');
                li.className = 'conversation-item';
                if (convo.id === currentChatId) li.classList.add('active');
                
                li.innerHTML = `
                    <i class="fas fa-comment conversation-icon"></i>
                    <span class="conversation-text">${convo.title}</span>
                `;
                
                li.onclick = () => loadChat(convo.id);
                section.appendChild(li);
            });
        }

        function loadChat(chatId) {
            currentChatId = chatId;
            const conversation = conversations.find(c => c.id === chatId);
            
            if (conversation) {
                document.getElementById('chatTitle').textContent = conversation.title;
                document.getElementById('messagesContainer').innerHTML = '';
                
                // Load messages
                conversation.messages.forEach(msg => {
                    addMessageToUI(msg.content, msg.sender, msg.timestamp);
                });
                
                updateConversationList();
                if (isSidebarOpen) toggleSidebar();
            }
        }

        // ==================== MESSAGING ====================
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Hide welcome screen
            document.getElementById('welcomeScreen')?.remove();
            
            // Add user message
            addMessageToUI(message, 'user');
            
            // Clear input
            input.value = '';
            autoResizeInput(input);
            
            // Show typing indicator
            showTypingIndicator();
            
            // Save to conversation
            const conversation = conversations.find(c => c.id === currentChatId);
            if (conversation) {
                conversation.messages.push({
                    id: 'msg_' + Date.now(),
                    content: message,
                    sender: 'user',
                    timestamp: new Date().toISOString()
                });
                
                // Update conversation title if first message
                if (conversation.messages.length === 1) {
                    conversation.title = message.substring(0, 30) + (message.length > 30 ? '...' : '');
                    document.getElementById('chatTitle').textContent = conversation.title;
                }
                
                conversation.updatedAt = new Date().toISOString();
                saveConversations();
            }
            
            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                const aiResponse = generateAIResponse(message);
                addMessageToUI(aiResponse, 'assistant');
                
                // Save AI response
                if (conversation) {
                    conversation.messages.push({
                        id: 'msg_' + Date.now(),
                        content: aiResponse,
                        sender: 'assistant',
                        timestamp: new Date().toISOString()
                    });
                    conversation.updatedAt = new Date().toISOString();
                    saveConversations();
                }
            }, 1000 + Math.random() * 1000);
        }

        function addMessageToUI(content, sender, timestamp = null) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-avatar ${sender}">
                        ${sender === 'user' ? currentUser.avatar : 'AI'}
                    </div>
                    <div class="message-sender">
                        ${sender === 'user' ? currentUser.name : 'Cyanix AI'}
                    </div>
                    <div class="message-time">
                        ${timestamp ? formatTime(timestamp) : formatTime(new Date().toISOString())}
                    </div>
                </div>
                <div class="message-content">${formatMessage(content)}</div>
                <div class="message-actions">
                    <button class="message-action" onclick="copyMessage(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="message-action" onclick="regenerateMessage(this)">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="message-action" onclick="likeMessage(this)">
                        <i class="far fa-thumbs-up"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function showTypingIndicator() {
            const container = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-avatar">AI</div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function generateAIResponse(userMessage) {
            // Simulate different AI responses based on message content
            const responses = {
                greetings: [
                    "Hello! I'm Cyanix AI, your intelligent assistant. How can I help you today?",
                    "Hi there! I'm here to help with anything you need. What's on your mind?",
                    "Greetings! Ready to dive into some interesting topics together?"
                ],
                help: [
                    "I can help you with a wide range of tasks including:\n Writing and editing\n Code generation and debugging\n Research and analysis\n Creative brainstorming\n Learning explanations\n Problem solving",
                    "I'm designed to assist with various tasks. You can ask me to:\n Explain complex concepts\n Generate creative ideas\n Write code in multiple languages\n Analyze data or text\n Help with planning and organization"
                ],
                coding: [
                    "I can help with coding in Python, JavaScript, Java, C++, and many other languages. What specific coding task do you need assistance with?",
                    "As a coding assistant, I can:\n Write functions and algorithms\n Debug code\n Explain programming concepts\n Suggest best practices\n Convert code between languages"
                ],
                creative: [
                    "Let's get creative! I can help with:\n Story writing\n Marketing copy\n Business names\n Creative concepts\n Design ideas\n Artistic inspiration",
                    "For creative tasks, I can assist with brainstorming, generating ideas, writing content, and providing creative feedback."
                ],
                default: [
                    "I understand you're asking about: \"" + userMessage + "\"\n\nLet me provide you with a comprehensive response...",
                    "That's an interesting question. Based on my analysis, here's what I can tell you...",
                    "I've processed your query and here's my detailed response..."
                ]
            };

            // Categorize the user message
            let category = 'default';
            const lowerMessage = userMessage.toLowerCase();

            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                category = 'greetings';
            } else if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                category = 'help';
            } else if (lowerMessage.includes('code') || lowerMessage.includes('program') || lowerMessage.includes('python') || lowerMessage.includes('javascript')) {
                category = 'coding';
            } else if (lowerMessage.includes('creative') || lowerMessage.includes('write') || lowerMessage.includes('story') || lowerMessage.includes('idea')) {
                category = 'creative';
            }

            const categoryResponses = responses[category];
            const response = categoryResponses[Math.floor(Math.random() * categoryResponses.length)];

            // Add some detail based on the message
            if (category === 'default') {
                return response + "\n\n" + generateDetailedResponse(userMessage);
            }

            return response;
        }

        function generateDetailedResponse(message) {
            const topics = [
                "This is an important topic because it affects many areas of modern technology and society.",
                "Let me break this down into key points for better understanding.",
                "Here's a structured approach to thinking about this:",
                "Based on current best practices and research, here's what you should know:",
                "I've analyzed this from multiple perspectives to give you a comprehensive answer."
            ];

            const details = [
                "First, consider the fundamental principles involved.",
                "Next, look at practical applications and real-world examples.",
                "It's also important to understand the limitations and challenges.",
                "Recent developments have significantly impacted this area.",
                "For implementation, here are some actionable steps you can take."
            ];

            const conclusion = [
                "I hope this provides a clear understanding. Would you like me to elaborate on any specific aspect?",
                "This should give you a solid foundation. Feel free to ask follow-up questions.",
                "Let me know if you need more detailed information on any of these points.",
                "Is there anything specific about this topic you'd like to explore further?"
            ];

            return topics[Math.floor(Math.random() * topics.length)] + "\n\n" +
                   details[Math.floor(Math.random() * details.length)] + " " +
                   details[Math.floor(Math.random() * details.length)] + "\n\n" +
                   conclusion[Math.floor(Math.random() * conclusion.length)];
        }

        function useExample(type) {
            const examples = {
                brainstorm: "Help me brainstorm creative project ideas for a tech startup that combines AI with environmental sustainability.",
                explain: "Explain quantum computing in simple terms. How does it differ from classical computing, and what are its potential applications?",
                code: "Write a Python function to sort a list using quicksort algorithm. Include comments explaining each step and provide example usage.",
                analyze: "Analyze the pros and cons of renewable energy sources (solar, wind, hydro) compared to fossil fuels. Consider factors like cost, efficiency, environmental impact, and scalability."
            };

            document.getElementById('chatInput').value = examples[type];
            autoResizeInput(document.getElementById('chatInput'));
        }

        // ==================== UI UTILITIES ====================
        function autoResizeInput(textarea) {
            textarea.style.height = 'auto';
            const newHeight = Math.min(textarea.scrollHeight, 200);
            textarea.style.height = newHeight + 'px';
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function formatMessage(text) {
            // Simple markdown-like formatting
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/`([^`]+)`/g, '<code>$1</code>')
                .replace(/\n/g, '<br>');
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function showToast(message, type = 'info') {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#ff4757' : type === 'success' ? '#2ed573' : '#3742fa'};
                color: white;
                padding: 12px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== MESSAGE ACTIONS ====================
        function copyMessage(button) {
            const messageContent = button.closest('.message').querySelector('.message-content').textContent;
            navigator.clipboard.writeText(messageContent)
                .then(() => showToast('Copied to clipboard', 'success'))
                .catch(() => showToast('Failed to copy', 'error'));
        }

        function regenerateMessage(button) {
            const messageDiv = button.closest('.message');
            const messageContent = messageDiv.querySelector('.message-content').textContent;
            
            // Show typing indicator
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const newResponse = generateAIResponse("Regenerate: " + messageContent);
                messageDiv.querySelector('.message-content').innerHTML = formatMessage(newResponse);
                showToast('Message regenerated', 'success');
            }, 1000);
        }

        function likeMessage(button) {
            const icon = button.querySelector('i');
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                button.style.color = '#2ed573';
                showToast('Liked', 'success');
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                button.style.color = '';
                showToast('Unliked', 'info');
            }
        }

        // ==================== USER ACTIONS ====================
        function showProfile() {
            showToast('Profile page coming soon!', 'info');
            toggleUserMenu();
        }

        function showSettings() {
            showToast('Settings page coming soon!', 'info');
            toggleUserMenu();
        }

        function showUpgrade() {
            showToast('Upgrade to Pro for advanced features!', 'info');
            toggleUserMenu();
        }

        function exportData() {
            const data = {
                user: currentUser,
                conversations: conversations,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cyanix-export-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Data exported successfully', 'success');
            toggleUserMenu();
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                currentChatId = null;
                conversations = [];
                
                localStorage.removeItem('cyanix_user');
                sessionStorage.removeItem('cyanix_user');
                
                document.getElementById('chatContainer').classList.remove('active');
                document.getElementById('authContainer').style.display = 'flex';
                
                // Reset forms
                document.getElementById('signinEmail').value = '';
                document.getElementById('signinPassword').value = '';
                document.getElementById('signupName').value = '';
                document.getElementById('signupEmail').value = '';
                document.getElementById('signupPassword').value = '';
                document.getElementById('signupConfirmPassword').value = '';
                
                switchAuthTab('signin');
                showToast('Logged out successfully', 'success');
                toggleUserMenu();
            }
        }

        function clearChat() {
            if (confirm('Clear this chat? This cannot be undone.')) {
                const conversation = conversations.find(c => c.id === currentChatId);
                if (conversation) {
                    conversation.messages = [];
                    saveConversations();
                }
                
                document.getElementById('messagesContainer').innerHTML = '';
                const welcomeScreen = document.getElementById('welcomeScreen').cloneNode(true);
                welcomeScreen.style.display = 'block';
                document.getElementById('messagesContainer').appendChild(welcomeScreen);
                
                showToast('Chat cleared', 'success');
            }
        }

        function shareChat() {
            showToast('Share feature coming soon!', 'info');
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            const icon = document.querySelector('.header-btn:nth-child(3) i');
            
            if (isDarkMode) {
                document.body.style.backgroundColor = 'var(--purple-dark)';
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                showToast('Dark mode enabled', 'success');
            } else {
                document.body.style.backgroundColor = '#f5f5f7';
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                showToast('Light mode enabled', 'success');
            }
        }

        function attachFile() {
            showToast('File attachment coming soon!', 'info');
        }

        function voiceInput() {
            showToast('Voice input coming soon!', 'info');
        }

        // ==================== MODAL FUNCTIONS ====================
        function showTermsModal() {
            document.getElementById('termsModal').classList.add('active');
        }

        function hideTermsModal() {
            document.getElementById('termsModal').classList.remove('active');
        }

        function acceptTerms() {
            document.getElementById('acceptTerms').checked = true;
            hideTermsModal();
            showToast('Terms accepted', 'success');
        }

        function showForgotPassword() {
            document.getElementById('forgotPasswordModal').classList.add('active');
        }

        function hideForgotPassword() {
            document.getElementById('forgotPasswordModal').classList.remove('active');
        }

        function sendResetEmail() {
            const email = document.getElementById('resetEmail').value;
            if (validateEmail(email)) {
                hideForgotPassword();
                showToast('Password reset email sent!', 'success');
            } else {
                showToast('Please enter a valid email', 'error');
            }
        }

        // ==================== HELPER FUNCTIONS ====================
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function getAvatarInitials(name) {
            return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
        }

        function saveConversations() {
            if (currentUser) {
                localStorage.setItem(`cyanix_conversations_${currentUser.id}`, JSON.stringify(conversations));
            }
        }

        function showWelcomeMessage() {
            // This is called after sign up
            newChat();
            
            setTimeout(() => {
                const welcomeMsg = "Welcome to Cyanix AI! I'm your intelligent assistant, ready to help you with writing, coding, analysis, creative tasks, and much more. Feel free to ask me anything!";
                addMessageToUI(welcomeMsg, 'assistant');
                
                // Save to conversation
                const conversation = conversations.find(c => c.id === currentChatId);
                if (conversation) {
                    conversation.messages.push({
                        id: 'msg_welcome',
                        content: welcomeMsg,
                        sender: 'assistant',
                        timestamp: new Date().toISOString()
                    });
                    saveConversations();
                }
            }, 1000);
        }

        // Add CSS for toast animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>d.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            // Show loading
            const btn = document.querySelector('#signinForm .auth-btn');
            const originalText = btn.textContent;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
            btn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Check mock database
                let user = mockDatabase.users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    if (!user.verified && user.provider === 'email') {
                        showToast('Please verify your email first', 'error');
                    } else {
                        // Successful login
                        currentUser = {
                            id: user.id,
                            name: user.name,
                            email: user.email,
                            avatar: user.avatar,
                            plan: user.plan || 'free',
                            createdAt: user.createdAt,
                            verified: user.verified
                        };
                        
                        // Save user session
                        if (rememberMe) {
                            localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                        } else {
                            sessionStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                        }
                        
                        showChatInterface();
                        loadConversations();
                        showToast('Welcome back!', 'success');
                    }
                } else {
                    showToast('Invalid email or password', 'error');
                }
                
                // Reset button
                btn.textContent = originalText;
                btn.disabled = false;
            }, 1500);
        }

        function signUpWithEmail() {
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const acceptTerms = document.getElementById('acceptTerms').checked;
            
            // Validation
            if (!name) {
                showToast('Please enter your name', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (!acceptTerms) {
                showToast('Please accept the terms and privacy policy', 'error');
                return;
            }
            
            // Check if user already exists
            if (mockDatabase.users.some(u => u.email === email)) {
                showToast('An account with this email already exists', 'error');
                return;
            }
            
            // Show loading
            const btn = document.querySelector('#signupForm .auth-btn');
            const originalText = btn.textContent;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
            btn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Create user object
                pendingUser = {
                    id: 'user_' + Date.now(),
                    name: name,
                    email: email,
                    password: password,
                    avatar: getAvatarInitials(name),
                    plan: 'free',
                    createdAt: new Date().toISOString(),
                    provider: 'email',
                    verified: false
                };
                
                // Generate verification code
                verificationCode = generateVerificationCode();
                
                // Send verification email
                sendVerificationEmail(email, verificationCode);
                
                // Show verification screen
                document.getElementById('authContainer').style.display = 'none';
                document.getElementById('verificationContainer').classList.add('active');
                document.getElementById('verificationEmail').textContent = email;
                
                // Start timer
                startVerificationTimer();
                
                // Focus first code input
                document.querySelector('.code-input').focus();
                
                // Reset button
                btn.textContent = originalText;
                btn.disabled = false;
            }, 2000);
        }

        function signInWithGoogle() {
            // Simulate Google OAuth
            showToast('Connecting to Google...', 'info');
            
            setTimeout(() => {
                // Google users are auto-verified
                const googleUser = {
                    id: 'google_' + Date.now(),
                    name: 'Google User',
                    email: 'user@gmail.com',
                    avatar: 'G',
                    plan: 'free',
                    provider: 'google',
                    verified: true,
                    createdAt: new Date().toISOString()
                };
                
                // Check if user exists
                let user = mockDatabase.users.find(u => u.email === googleUser.email);
                if (!user) {
                    user = googleUser;
                    mockDatabase.users.push(user);
                }
                
                currentUser = { ...user };
                delete currentUser.password;
                
                localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                showChatInterface();
                loadConversations();
                showToast('Signed in with Google', 'success');
            }, 1500);
        }

        function signUpWithGoogle() {
            signInWithGoogle();
        }

        function signInWithMicrosoft() {
            showToast('Connecting to Microsoft...', 'info');
            
            setTimeout(() => {
                // Microsoft users are auto-verified
                const microsoftUser = {
                    id: 'microsoft_' + Date.now(),
                    name: 'Microsoft User',
                    email: 'user@outlook.com',
                    avatar: 'M',
                    plan: 'free',
                    provider: 'microsoft',
                    verified: true,
                    createdAt: new Date().toISOString()
                };
                
                // Check if user exists
                let user = mockDatabase.users.find(u => u.email === microsoftUser.email);
                if (!user) {
                    user = microsoftUser;
                    mockDatabase.users.push(user);
                }
                
                currentUser = { ...user };
                delete currentUser.password;
                
                localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                showChatInterface();
                loadConversations();
                showToast('Signed in with Microsoft', 'success');
            }, 1500);
        }

        function signUpWithMicrosoft() {
            signInWithMicrosoft();
        }

        // ==================== FILE UPLOAD FEATURE ====================
        function showFileUploadModal() {
            document.getElementById('fileUploadModal').classList.add('active');
        }

        function hideFileUploadModal() {
            document.getElementById('fileUploadModal').classList.remove('active');
        }

        function triggerFileUpload() {
            document.getElementById('fileInput').click();
        }

        function handleFileUpload(files) {
            const uploadedFilesDiv = document.getElementById('uploadedFiles');
            uploadedFilesDiv.innerHTML = '';
            
            uploadedFiles = Array.from(files);
            
            uploadedFiles.forEach((file, index) => {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'settings-option';
                fileDiv.innerHTML = `
                    <div>
                        <div class="option-label">${file.name}</div>
                        <div class="option-description">${formatFileSize(file.size)}  ${file.type}</div>
                    </div>
                    <button class="input-btn" onclick="removeFile(${index})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                uploadedFilesDiv.appendChild(fileDiv);
            });
            
            showToast(`${files.length} file(s) selected`, 'success');
        }

        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            handleFileUpload(uploadedFiles);
        }

        function processUploadedFiles() {
            if (uploadedFiles.length === 0) {
                showToast('Please select files first', 'error');
                return;
            }
            
            // Simulate file processing
            showToast('Processing files...', 'info');
            
            setTimeout(() => {
                // Add message about files
                const fileNames = uploadedFiles.map(f => f.name).join(', ');
                const message = `I've uploaded ${uploadedFiles.length} file(s): ${fileNames}. You can ask me questions about these files.`;
                
                addMessageToUI(message, 'user');
                hideFileUploadModal();
                
                // Clear files
                uploadedFiles = [];
                document.getElementById('uploadedFiles').innerHTML = '';
                
                // Simulate AI response
                setTimeout(() => {
                    const response = `I can see you've uploaded ${uploadedFiles.length} file(s). I can help you analyze these files. Please tell me what specific information you'd like me to extract or analyze from them.`;
                    addMessageToUI(response, 'assistant');
                }, 1000);
            }, 2000);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // ==================== VOICE INPUT FEATURE ====================
        function startVoiceRecording() {
            // Check if browser supports voice recognition
            if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
                showToast('Voice input not supported in your browser', 'error');
                return;
            }
            
            // Show recording interface
            document.getElementById('voiceRecording').classList.add('active');
            voiceRecordingActive = true;
            
            // In a real app, this would use the Web Speech API
            // For demo, we'll simulate voice recognition
            showToast('Voice recording started. Speak now!', 'info');
        }

        function stopVoiceRecording() {
            if (!voiceRecordingActive) return;
            
            // Hide recording interface
            document.getElementById('voiceRecording').classList.remove('active');
            voiceRecordingActive = false;
            
            // Simulate voice recognition result
            const sampleResponses = [
                "Hello, how can I help you today?",
                "I need help with my Python code",
                "What is the weather like today?",
                "Can you explain quantum computing?",
                "Create a business plan for a startup"
            ];
            
            const randomResponse = sampleResponses[Math.floor(Math.random() * sampleResponses.length)];
            
            // Set the recognized text in the input
            document.getElementById('chatInput').value = randomResponse;
            autoResizeInput(document.getElementById('chatInput'));
            
            showToast('Voice input captured', 'success');
        }

        function cancelVoiceRecording() {
            document.getElementById('voiceRecording').classList.remove('active');
            voiceRecordingActive = false;
            showToast('Voice recording cancelled', 'info');
        }

        // ==================== SHARE FEATURE ====================
        function showShareModal() {
            document.getElementById('shareModal').classList.add('active');
            
            // Generate share link
            generateShareLink();
        }

        function hideShareModal() {
            document.getElementById('shareModal').classList.remove('active');
        }

        function generateShareLink() {
            // In a real app, this would generate a unique shareable link
            const shareLink = `https://cyanix.ai/share/${currentChatId || 'demo'}`;
            document.getElementById('shareLinkInput').value = shareLink;
        }

        function copyShareLink() {
            const shareLink = document.getElementById('shareLinkInput');
            shareLink.select();
            shareLink.setSelectionRange(0, 99999);
            
            navigator.clipboard.writeText(shareLink.value)
                .then(() => showToast('Link copied to clipboard', 'success'))
                .catch(() => showToast('Failed to copy link', 'error'));
        }

        function shareViaEmail() {
            const subject = 'Check out this Cyanix AI conversation';
            const body = `I wanted to share this Cyanix AI conversation with you:\n\n${window.location.href}`;
            window.open(`mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
            hideShareModal();
        }

        function shareViaWhatsApp() {
            const text = 'Check out this Cyanix AI conversation: ' + window.location.href;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
            hideShareModal();
        }

        function shareViaTwitter() {
            const text = 'Check out this amazing AI conversation on Cyanix AI!';
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`);
            hideShareModal();
        }

        // ==================== PROFILE MODAL ====================
        function showProfileModal() {
            if (!currentUser) return;
            
            // Update profile info
            document.getElementById('profileAvatar').textContent = currentUser.avatar;
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profileEmail').textContent = currentUser.email;
            
            // Calculate stats
            const totalChats = conversations.length;
            const totalMessages = conversations.reduce((sum, conv) => sum + (conv.messages?.length || 0), 0);
            const accountAge = currentUser.createdAt ? 
                Math.floor((new Date() - new Date(currentUser.createdAt)) / (1000 * 60 * 60 * 24)) : 0;
            
            document.getElementById('totalChats').textContent = totalChats;
            document.getElementById('totalMessages').textContent = totalMessages;
            document.getElementById('accountAge').textContent = accountAge + 'd';
            
            document.getElementById('profileModal').classList.add('active');
            toggleUserMenu();
        }

        function hideProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        function saveProfileSettings() {
            // Save profile settings
            const emailNotifications = document.getElementById('emailNotifications').checked;
            const marketingEmails = document.getElementById('marketingEmails').checked;
            
            // In a real app, this would save to backend
            localStorage.setItem('email_notifications', emailNotifications);
            localStorage.setItem('marketing_emails', marketingEmails);
            
            showToast('Profile settings saved', 'success');
            hideProfileModal();
        }

        // ==================== SETTINGS MODAL ====================
        function showSettingsModal() {
            // Load current settings
            const savedModel = localStorage.getItem('ai_model') || 'cyanix';
            const savedLength = localStorage.getItem('response_length') || 'medium';
            const saveHistory = localStorage.getItem('save_history') !== 'false';
            const autoClearData = localStorage.getItem('auto_clear_data') !== 'false';
            const voiceResponses = localStorage.getItem('voice_responses') === 'true';
            const voiceSpeed = localStorage.getItem('voice_speed') || 'normal';
            
            document.getElementById('aiModel').value = savedModel;
            document.getElementById('responseLength').value = savedLength;
            document.getElementById('saveHistory').checked = saveHistory;
            document.getElementById('autoClearData').checked = autoClearData;
            document.getElementById('voiceResponses').checked = voiceResponses;
            document.getElementById('voiceSpeed').value = voiceSpeed;
            
            document.getElementById('settingsModal').classList.add('active');
            toggleUserMenu();
        }

        function hideSettingsModal() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        function saveSettings() {
            // Get settings values
            const aiModel = document.getElementById('aiModel').value;
            const responseLength = document.getElementById('responseLength').value;
            const saveHistory = document.getElementById('saveHistory').checked;
            const autoClearData = document.getElementById('autoClearData').checked;
            const voiceResponses = document.getElementById('voiceResponses').checked;
            const voiceSpeed = document.getElementById('voiceSpeed').value;
            
            // Save to localStorage
            localStorage.setItem('ai_model', aiModel);
            localStorage.setItem('response_length', responseLength);
            localStorage.setItem('save_history', saveHistory);
            localStorage.setItem('auto_clear_data', autoClearData);
            localStorage.setItem('voice_responses', voiceResponses);
            localStorage.setItem('voice_speed', voiceSpeed);
            
            showToast('Settings saved successfully', 'success');
            hideSettingsModal();
        }

        // ==================== UPGRADE MODAL ====================
        function showUpgradeModal() {
            document.getElementById('upgradeModal').classList.add('active');
            toggleUserMenu();
        }

        function hideUpgradeModal() {
            document.getElementById('upgradeModal').classList.remove('active');
        }

        function upgradeToPro() {
            // In a real app, this would redirect to payment
            showToast('Redirecting to payment...', 'info');
            
            // Simulate successful upgrade
            setTimeout(() => {
                if (currentUser) {
                    currentUser.plan = 'pro';
                    localStorage.setItem('cyanix_user', JSON.stringify(currentUser));
                    showToast('Successfully upgraded to Pro!', 'success');
                    hideUpgradeModal();
                }
            }, 1500);
        }

        function upgradeToTeam() {
            showToast('Please contact sales@cyanix.ai for team plans', 'info');
        }

        // ==================== CHAT INTERFACE ====================
        function showChatInterface() {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('verificationContainer').classList.remove('active');
            document.getElementById('chatContainer').classList.add('active');
            
            // Update user info
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userAvatar').textContent = currentUser.avatar;
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainChat = document.getElementById('mainChat');
            
            isSidebarOpen = !isSidebarOpen;
            
            if (isSidebarOpen) {
                sidebar.classList.add('active');
                mainChat.classList.add('sidebar-active');
            } else {
                sidebar.classList.remove('active');
                mainChat.classList.remove('sidebar-active');
            }
        }

        function toggleUserMenu() {
            const userMenu = document.getElementById('userMenu');
            userMenuOpen = !userMenuOpen;
            
            if (userMenuOpen) {
                userMenu.classList.add('active');
                // Close menu when clicking outside
                setTimeout(() => {
                    document.addEventListener('click', closeUserMenuOnClickOutside);
                }, 10);
            } else {
                userMenu.classList.remove('active');
                document.removeEventListener('click', closeUserMenuOnClickOutside);
            }
        }

        function closeUserMenuOnClickOutside(event) {
            const userMenu = document.getElementById('userMenu');
            const userProfile = document.querySelector('.user-profile');
            
            if (!userMenu.contains(event.target) && !userProfile.contains(event.target)) {
                userMenu.classList.remove('active');
                userMenuOpen = false;
                document.removeEventListener('click', closeUserMenuOnClickOutside);
            }
        }

        function newChat() {
            currentChatId = 'chat_' + Date.now();
            document.getElementById('messagesContainer').innerHTML = '';
            document.getElementById('chatTitle').textContent = 'New Chat';
            
            // Show welcome screen
            const welcomeScreen = document.getElementById('welcomeScreen').cloneNode(true);
            welcomeScreen.style.display = 'block';
            document.getElementById('messagesContainer').appendChild(welcomeScreen);
            
            // Add to conversations
            const conversation = {
                id: currentChatId,
                title: 'New Chat',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                messages: []
            };
            
            conversations.unshift(conversation);
            updateConversationList();
            
            if (isSidebarOpen) toggleSidebar();
        }

        function loadConversations() {
            // Load from localStorage
            const savedConversations = localStorage.getItem(`cyanix_conversations_${currentUser?.id}`);
            if (savedConversations) {
                conversations = JSON.parse(savedConversations);
                updateConversationList();
            } else {
                // Create demo conversations for new users
                conversations = [
                    {
                        id: 'chat_1',
                        title: 'Python Programming Help',
                        createdAt: new Date(Date.now() - 3600000).toISOString(),
                        updatedAt: new Date(Date.now() - 3600000).toISOString(),
                        messages: []
                    },
                    {
                        id: 'chat_2',
                        title: 'Business Idea Brainstorming',
                        createdAt: new Date(Date.now() - 86400000).toISOString(),
                        updatedAt: new Date(Date.now() - 86400000).toISOString(),
                        messages: []
                    }
                ];
                updateConversationList();
            }
        }

        function updateConversationList() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            const weekAgo = new Date(today);
            weekAgo.setDate(weekAgo.getDate() - 7);
            
            const todayConvos = conversations.filter(c => new Date(c.updatedAt) >= today);
            const yesterdayConvos = conversations.filter(c => 
                new Date(c.updatedAt) >= yesterday && new Date(c.updatedAt) < today
            );
            const weekConvos = conversations.filter(c => 
                new Date(c.updatedAt) >= weekAgo && new Date(c.updatedAt) < yesterday
            );
            
            updateConversationSection('todayConversations', todayConvos);
            updateConversationSection('yesterdayConversations', yesterdayConvos);
            updateConversationSection('weekConversations', weekConvos);
        }

        function updateConversationSection(sectionId, convos) {
            const section = document.getElementById(sectionId);
            section.innerHTML = '';
            
            convos.forEach(convo => {
                const li = document.createElement('li');
                li.className = 'conversation-item';
                if (convo.id === currentChatId) li.classList.add('active');
                
                li.innerHTML = `
                    <i class="fas fa-comment conversation-icon"></i>
                    <span class="conversation-text">${convo.title}</span>
                `;
                
                li.onclick = () => loadChat(convo.id);
                section.appendChild(li);
            });
        }

        function loadChat(chatId) {
            currentChatId = chatId;
            const conversation = conversations.find(c => c.id === chatId);
            
            if (conversation) {
                document.getElementById('chatTitle').textContent = conversation.title;
                document.getElementById('messagesContainer').innerHTML = '';
                
                // Load messages
                conversation.messages?.forEach(msg => {
                    addMessageToUI(msg.content, msg.sender, msg.timestamp);
                });
                
                // If no messages, show welcome screen
                if (!conversation.messages || conversation.messages.length === 0) {
                    const welcomeScreen = document.getElementById('welcomeScreen').cloneNode(true);
                    welcomeScreen.style.display = 'block';
                    document.getElementById('messagesContainer').appendChild(welcomeScreen);
                }
                
                updateConversationList();
                if (isSidebarOpen) toggleSidebar();
            }
        }

        // ==================== MESSAGING ====================
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Hide welcome screen
            document.getElementById('welcomeScreen')?.remove();
            
            // Add user message
            addMessageToUI(message, 'user');
            
            // Clear input
            input.value = '';
            autoResizeInput(input);
            
            // Show typing indicator
            showTypingIndicator();
            
            // Save to conversation
            const conversation = conversations.find(c => c.id === currentChatId);
            if (conversation) {
                if (!conversation.messages) conversation.messages = [];
                
                conversation.messages.push({
                    id: 'msg_' + Date.now(),
                    content: message,
                    sender: 'user',
                    timestamp: new Date().toISOString()
                });
                
                // Update conversation title if first message
                if (conversation.messages.length === 1) {
                    conversation.title = message.substring(0, 30) + (message.length > 30 ? '...' : '');
                    document.getElementById('chatTitle').textContent = conversation.title;
                }
                
                conversation.updatedAt = new Date().toISOString();
                saveConversations();
            }
            
            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                const aiResponse = generateAIResponse(message);
                addMessageToUI(aiResponse, 'assistant');
                
                // Save AI response
                if (conversation) {
                    conversation.messages.push({
                        id: 'msg_' + Date.now(),
                        content: aiResponse,
                        sender: 'assistant',
                        timestamp: new Date().toISOString()
                    });
                    conversation.updatedAt = new Date().toISOString();
                    saveConversations();
                }
            }, 1000 + Math.random() * 1000);
        }

        function addMessageToUI(content, sender, timestamp = null) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-avatar ${sender}">
                        ${sender === 'user' ? (currentUser?.avatar || 'U') : 'AI'}
                    </div>
                    <div class="message-sender">
                        ${sender === 'user' ? (currentUser?.name || 'You') : 'Cyanix AI'}
                    </div>
                    <div class="message-time">
                        ${timestamp ? formatTime(timestamp) : formatTime(new Date().toISOString())}
                    </div>
                </div>
                <div class="message-content">${formatMessage(content)}</div>
                <div class="message-actions">
                    <button class="message-action" onclick="copyMessage(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="message-action" onclick="regenerateMessage(this)">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="message-action" onclick="likeMessage(this)">
                        <i class="far fa-thumbs-up"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function showTypingIndicator() {
            const container = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-avatar">AI</div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function generateAIResponse(userMessage) {
            // Simulate different AI responses based on message content
            const responses = {
                greetings: [
                    "Hello! I'm Cyanix AI, your intelligent assistant. How can I help you today?",
                    "Hi there! I'm here to help with anything you need. What's on your mind?",
                    "Greetings! Ready to dive into some interesting topics together?"
                ],
                help: [
                    "I can help you with a wide range of tasks including:\n Writing and editing\n Code generation and debugging\n Research and analysis\n Creative brainstorming\n Learning explanations\n Problem solving",
                    "I'm designed to assist with various tasks. You can ask me to:\n Explain complex concepts\n Generate creative ideas\n Write code in multiple languages\n Analyze data or text\n Help with planning and organization"
                ],
                coding: [
                    "I can help with coding in Python, JavaScript, Java, C++, and many other languages. What specific coding task do you need assistance with?",
                    "As a coding assistant, I can:\n Write functions and algorithms\n Debug code\n Explain programming concepts\n Suggest best practices\n Convert code between languages"
                ],
                creative: [
                    "Let's get creative! I can help with:\n Story writing\n Marketing copy\n Business names\n Creative concepts\n Design ideas\n Artistic inspiration",
                    "For creative tasks, I can assist with brainstorming, generating ideas, writing content, and providing creative feedback."
                ],
                default: [
                    "I understand you're asking about: \"" + userMessage + "\"\n\nLet me provide you with a comprehensive response...",
                    "That's an interesting question. Based on my analysis, here's what I can tell you...",
                    "I've processed your query and here's my detailed response..."
                ]
            };

            // Categorize the user message
            let category = 'default';
            const lowerMessage = userMessage.toLowerCase();

            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                category = 'greetings';
            } else if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                category = 'help';
            } else if (lowerMessage.includes('code') || lowerMessage.includes('program') || lowerMessage.includes('python') || lowerMessage.includes('javascript')) {
                category = 'coding';
            } else if (lowerMessage.includes('creative') || lowerMessage.includes('write') || lowerMessage.includes('story') || lowerMessage.includes('idea')) {
                category = 'creative';
            }

            const categoryResponses = responses[category];
            const response = categoryResponses[Math.floor(Math.random() * categoryResponses.length)];

            // Add some detail based on the message
            if (category === 'default') {
                return response + "\n\n" + generateDetailedResponse(userMessage);
            }

            return response;
        }

        function generateDetailedResponse(message) {
            const topics = [
                "This is an important topic because it affects many areas of modern technology and society.",
                "Let me break this down into key points for better understanding.",
                "Here's a structured approach to thinking about this:",
                "Based on current best practices and research, here's what you should know:",
                "I've analyzed this from multiple perspectives to give you a comprehensive answer."
            ];

            const details = [
                "First, consider the fundamental principles involved.",
                "Next, look at practical applications and real-world examples.",
                "It's also important to understand the limitations and challenges.",
                "Recent developments have significantly impacted this area.",
                "For implementation, here are some actionable steps you can take."
            ];

            const conclusion = [
                "I hope this provides a clear understanding. Would you like me to elaborate on any specific aspect?",
                "This should give you a solid foundation. Feel free to ask follow-up questions.",
                "Let me know if you need more detailed information on any of these points.",
                "Is there anything specific about this topic you'd like to explore further?"
            ];

            return topics[Math.floor(Math.random() * topics.length)] + "\n\n" +
                   details[Math.floor(Math.random() * details.length)] + " " +
                   details[Math.floor(Math.random() * details.length)] + "\n\n" +
                   conclusion[Math.floor(Math.random() * conclusion.length)];
        }

        function useExample(type) {
            const examples = {
                brainstorm: "Help me brainstorm creative project ideas for a tech startup that combines AI with environmental sustainability.",
                explain: "Explain quantum computing in simple terms. How does it differ from classical computing, and what are its potential applications?",
                code: "Write a Python function to sort a list using quicksort algorithm. Include comments explaining each step and provide example usage.",
                analyze: "Analyze the pros and cons of renewable energy sources (solar, wind, hydro) compared to fossil fuels. Consider factors like cost, efficiency, environmental impact, and scalability."
            };

            document.getElementById('chatInput').value = examples[type];
            autoResizeInput(document.getElementById('chatInput'));
        }

        // ==================== UI UTILITIES ====================
        function autoResizeInput(textarea) {
            textarea.style.height = 'auto';
            const newHeight = Math.min(textarea.scrollHeight, 200);
            textarea.style.height = newHeight + 'px';
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
     