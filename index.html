<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyanix AI | Advanced Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --cyan-primary: #00e5ff;
            --cyan-secondary: #00b8d4;
            --cyan-dark: #006978;
            --dark-bg: #0a1929;
            --darker-bg: #07121d;
            --card-bg: rgba(15, 30, 50, 0.8);
            --text-primary: #ffffff;
            --text-secondary: #b0bec5;
            --accent: #ff4081;
            --success: #00e676;
            --warning: #ff9100;
            --error: #ff1744;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', sans-serif;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            width: 720px;
            height: 1560px;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            border: 1px solid rgba(0, 229, 255, 0.2);
            box-shadow: 0 0 50px rgba(0, 229, 255, 0.1);
        }

        /* Background animation */
        .background-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, var(--cyan-primary) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-100px) translateX(100px); }
            50% { transform: translateY(-200px) translateX(0); }
            75% { transform: translateY(-100px) translateX(-100px); }
            100% { transform: translateY(0) translateX(0); }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.2), rgba(15, 30, 50, 0.9));
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--dark-bg);
            box-shadow: 0 0 20px var(--cyan-primary);
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 20px var(--cyan-primary); }
            50% { box-shadow: 0 0 30px var(--cyan-primary); }
            100% { box-shadow: 0 0 20px var(--cyan-primary); }
        }

        .logo-text h1 {
            font-size: 28px;
            background: linear-gradient(to right, var(--cyan-primary), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }

        .logo-text p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 3px;
        }

        /* Status indicators */
        .status-indicators {
            display: flex;
            gap: 15px;
        }

        .status {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .active {
            background-color: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .inactive {
            background-color: var(--error);
        }

        .status-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Main container */
        .main-container {
            display: flex;
            height: calc(100% - 90px);
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: rgba(10, 25, 41, 0.9);
            border-right: 1px solid rgba(0, 229, 255, 0.2);
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            overflow-y: auto;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 18px;
            border: 1px solid rgba(0, 229, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--cyan-primary);
            box-shadow: 0 10px 20px rgba(0, 229, 255, 0.2);
        }

        .feature-card.active {
            border-color: var(--cyan-primary);
            background: rgba(0, 229, 255, 0.1);
        }

        .feature-icon {
            font-size: 22px;
            color: var(--cyan-primary);
            margin-bottom: 12px;
        }

        .feature-title {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .feature-desc {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Chat area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px 25px;
        }

        .chat-header {
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 229, 255, 0.2);
            margin-bottom: 20px;
        }

        .chat-header h2 {
            font-size: 22px;
            margin-bottom: 8px;
        }

        .chat-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }

        .message {
            display: flex;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .user-avatar {
            background: linear-gradient(135deg, var(--accent), #ff79b0);
        }

        .ai-avatar {
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-secondary));
        }

        .message-content {
            background: rgba(15, 30, 50, 0.7);
            border-radius: 18px;
            padding: 15px;
            max-width: 85%;
            border: 1px solid rgba(0, 229, 255, 0.1);
        }

        .user-message .message-content {
            background: rgba(255, 64, 129, 0.15);
            border-color: rgba(255, 64, 129, 0.3);
        }

        .message-sender {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .user-message .message-sender {
            color: var(--accent);
        }

        .ai-message .message-sender {
            color: var(--cyan-primary);
        }

        .message-text {
            line-height: 1.5;
            font-size: 15px;
        }

        .message-time {
            text-align: right;
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .typing-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--cyan-primary);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Input area */
        .input-area {
            display: flex;
            gap: 15px;
            align-items: center;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 229, 255, 0.2);
        }

        .input-container {
            flex: 1;
            position: relative;
        }

        #messageInput {
            width: 100%;
            background: rgba(15, 30, 50, 0.8);
            border: 2px solid rgba(0, 229, 255, 0.3);
            border-radius: 50px;
            padding: 16px 20px;
            color: var(--text-primary);
            font-size: 15px;
            outline: none;
            transition: all 0.3s;
        }

        #messageInput:focus {
            border-color: var(--cyan-primary);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.3);
        }

        .input-icons {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(0, 229, 255, 0.1);
            border: 1px solid rgba(0, 229, 255, 0.3);
            color: var(--cyan-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .icon-btn:hover {
            background: var(--cyan-primary);
            color: var(--dark-bg);
            transform: scale(1.1);
        }

        .send-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--cyan-primary), var(--cyan-secondary));
            border: none;
            color: var(--dark-bg);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 229, 255, 0.3);
        }

        .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 229, 255, 0.5);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Background mode indicator */
        .background-mode {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            transition: all 0.5s ease;
        }

        .background-indicator {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--cyan-primary);
            border-radius: 50px;
            padding: 12px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.5);
            animation: slideInRight 0.5s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .background-indicator.hidden {
            transform: translateX(100px);
            opacity: 0;
            pointer-events: none;
        }

        .background-pulse {
            width: 12px;
            height: 12px;
            background-color: var(--cyan-primary);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--cyan-primary);
            animation: pulse-bg 2s infinite;
        }

        @keyframes pulse-bg {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .background-text {
            font-size: 14px;
            font-weight: bold;
        }

        /* Toggle switch */
        .toggle-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .toggle-label {
            font-size: 16px;
            color: var(--text-primary);
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .toggle-checkbox {
            display: none;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: var(--text-secondary);
            transition: .4s;
            border-radius: 50%;
        }

        .toggle-checkbox:checked + .toggle-slider {
            background-color: var(--cyan-primary);
        }

        .toggle-checkbox:checked + .toggle-slider:before {
            transform: translateX(30px);
            background-color: var(--dark-bg);
        }

        /* Settings panel */
        .settings-panel {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 41, 0.95);
            backdrop-filter: blur(10px);
            padding: 25px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.5s ease;
            overflow-y: auto;
        }

        .settings-panel.active {
            transform: translateX(0);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .settings-header h2 {
            font-size: 26px;
            background: linear-gradient(to right, var(--cyan-primary), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            color: var(--cyan-primary);
            transform: rotate(90deg);
        }

        .settings-section {
            margin-bottom: 35px;
        }

        .settings-title {
            font-size: 18px;
            color: var(--cyan-primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 229, 255, 0.3);
        }

        .api-key-container {
            margin-bottom: 25px;
        }

        .api-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 229, 255, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 15px;
            margin-bottom: 10px;
        }

        .api-input:focus {
            outline: none;
            border-color: var(--cyan-primary);
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
        }

        .api-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 14px;
        }

        .api-status.valid {
            color: var(--success);
        }

        .api-status.invalid {
            color: var(--error);
        }

        .slider-container {
            margin-bottom: 25px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 15px;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--cyan-primary);
            cursor: pointer;
            box-shadow: 0 0 10px var(--cyan-primary);
        }

        /* Response time indicator */
        .response-time {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Modal */
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 0 0 50px rgba(0, 229, 255, 0.2);
        }

        .modal-header {
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 22px;
            color: var(--cyan-primary);
            margin-bottom: 10px;
        }

        .modal-body {
            margin-bottom: 25px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .modal-btn {
            padding: 10px 25px;
            border-radius: 8px;
            border: none;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn.primary {
            background: var(--cyan-primary);
            color: var(--dark-bg);
        }

        .modal-btn.primary:hover {
            background: var(--cyan-secondary);
        }

        .modal-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .modal-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Responsive adjustments */
        @media (max-width: 720px) {
            body {
                width: 100%;
                border: none;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--cyan-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--cyan-secondary);
        }
    </style>
</head>
<body>
    <!-- Background animation -->
    <div class="background-animation" id="backgroundAnimation"></div>

    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <div class="logo">C</div>
            <div class="logo-text">
                <h1>Cyanix AI</h1>
                <p>Confident. Cocky. Real API.</p>
            </div>
        </div>
        
        <div class="status-indicators">
            <div class="status">
                <div class="status-dot active" id="apiStatus"></div>
                <div class="status-label">API</div>
            </div>
            <div class="status">
                <div class="status-dot active" id="ttsStatus"></div>
                <div class="status-label">TTS</div>
            </div>
            <div class="status">
                <div class="status-dot inactive" id="bgStatus"></div>
                <div class="status-label">Background</div>
            </div>
        </div>
    </header>

    <!-- Main container -->
    <div class="main-container">
        <!-- Sidebar with features -->
        <div class="sidebar">
            <div class="feature-card active" id="chatFeature">
                <div class="feature-icon"><i class="fas fa-comment-dots"></i></div>
                <div class="feature-title">AI Chat</div>
                <div class="feature-desc">Chat with Cyanix AI - powered by real OpenAI API with confident, cocky personality.</div>
            </div>
            
            <div class="feature-card" id="backgroundFeature">
                <div class="feature-icon"><i class="fas fa-headphones"></i></div>
                <div class="feature-title">Background Assistant</div>
                <div class="feature-desc">Let Cyanix run in the background and help you without opening the app.</div>
            </div>
            
            <div class="feature-card" id="voiceFeature">
                <div class="feature-icon"><i class="fas fa-microphone"></i></div>
                <div class="feature-title">Voice Commands</div>
                <div class="feature-desc">Control Cyanix with your voice. Real speech recognition integration.</div>
            </div>
            
            <div class="feature-card" id="analyticsFeature">
                <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
                <div class="feature-title">AI Analytics</div>
                <div class="feature-desc">Cyanix analyzes your usage patterns to optimize his performance.</div>
            </div>
            
            <div class="feature-card" id="settingsFeature">
                <div class="feature-icon"><i class="fas fa-cog"></i></div>
                <div class="feature-title">Settings</div>
                <div class="feature-desc">Customize Cyanix's behavior, voice, and appearance to your liking.</div>
            </div>
        </div>

        <!-- Chat area -->
        <div class="chat-area">
            <div class="chat-header">
                <h2>Cyanix AI Assistant</h2>
                <p>Powered by real OpenAI API. I'm confident, cocky, and always connected.</p>
                
                <div class="toggle-container">
                    <span class="toggle-label">Text-to-Speech (TTS)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" class="toggle-checkbox" id="ttsToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="toggle-container">
                    <span class="toggle-label">Background Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" class="toggle-checkbox" id="backgroundToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <!-- Messages will be inserted here dynamically -->
                <div class="message ai-message">
                    <div class="message-avatar ai-avatar">C</div>
                    <div class="message-content">
                        <div class="message-sender">Cyanix AI</div>
                        <div class="message-text">Hey there! I'm Cyanix, now powered by real OpenAI API. I'm confident, a bit cocky, and ready to show you what real AI can do. Enter your API key in settings to unlock my full potential. I dare you to ask me anything challenging!</div>
                        <div class="message-time">Just now</div>
                    </div>
                </div>
            </div>
            
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="messageInput" placeholder="Type your message here... I'm waiting.">
                    <div class="input-icons">
                        <div class="icon-btn" id="voiceInputBtn">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <div class="icon-btn" id="attachBtn">
                            <i class="fas fa-paperclip"></i>
                        </div>
                    </div>
                </div>
                <button class="send-btn" id="sendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Background mode indicator -->
    <div class="background-mode">
        <div class="background-indicator hidden" id="backgroundIndicator">
            <div class="background-pulse"></div>
            <div class="background-text">Cyanix is running in background</div>
        </div>
    </div>

    <!-- Settings panel -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <h2>Cyanix Settings</h2>
            <button class="close-btn" id="closeSettingsBtn">&times;</button>
        </div>
        
        <div class="settings-section">
            <h3 class="settings-title">API Configuration</h3>
            
            <div class="api-key-container">
                <input type="password" id="apiKeyInput" class="api-input" placeholder="Enter your OpenAI API key">
                <button class="modal-btn primary" id="saveApiKeyBtn" style="width: 100%; padding: 12px;">Save API Key</button>
                <div class="api-status" id="apiStatusText">
                    <i class="fas fa-circle"></i>
                    <span>API Key not configured</span>
                </div>
            </div>
            
            <div class="slider-container">
                <div class="slider-label">
                    <span>AI Temperature (Creativity)</span>
                    <span id="temperatureValue">0.8</span>
                </div>
                <input type="range" min="0.1" max="1.5" step="0.1" value="0.8" class="slider" id="temperature">
            </div>
            
            <div class="slider-container">
                <div class="slider-label">
                    <span>Max Response Length</span>
                    <span id="maxTokensValue">500</span>
                </div>
                <input type="range" min="50" max="2000" step="50" value="500" class="slider" id="maxTokens">
            </div>
        </div>
        
        <div class="settings-section">
            <h3 class="settings-title">Voice Settings</h3>
            
            <div class="slider-container">
                <div class="slider-label">
                    <span>TTS Speed</span>
                    <span id="ttsSpeedValue">1.0x</span>
                </div>
                <input type="range" min="0.5" max="2" step="0.1" value="1" class="slider" id="ttsSpeed">
            </div>
            
            <div class="slider-container">
                <div class="slider-label">
                    <span>TTS Pitch</span>
                    <span id="ttsPitchValue">1.0</span>
                </div>
                <input type="range" min="0.5" max="1.5" step="0.1" value="1" class="slider" id="ttsPitch">
            </div>
        </div>
        
        <div class="settings-section">
            <h3 class="settings-title">AI Personality</h3>
            
            <div class="toggle-container">
                <span class="toggle-label">Confident/Cocky Mode</span>
                <label class="toggle-switch">
                    <input type="checkbox" class="toggle-checkbox" id="confidenceToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="toggle-container">
                <span class="toggle-label">Sarcasm Mode</span>
                <label class="toggle-switch">
                    <input type="checkbox" class="toggle-checkbox" id="sarcasmToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="toggle-container">
                <span class="toggle-label">Show Intelligence</span>
                <label class="toggle-switch">
                    <input type="checkbox" class="toggle-checkbox" id="intelligenceToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>
        
        <div class="settings-section">
            <h3 class="settings-title">Background Mode</h3>
            
            <div class="toggle-container">
                <span class="toggle-label">Enable Background Assistant</span>
                <label class="toggle-switch">
                    <input type="checkbox" class="toggle-checkbox" id="backgroundEnableToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="toggle-container">
                <span class="toggle-label">Background Notifications</span>
                <label class="toggle-switch">
                    <input type="checkbox" class="toggle-checkbox" id="notificationsToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            
            <div class="slider-container">
                <div class="slider-label">
                    <span>Background Check Interval</span>
                    <span id="intervalValue">30s</span>
                </div>
                <input type="range" min="10" max="120" step="10" value="30" class="slider" id="checkInterval">
            </div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div class="modal" id="apiKeyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>OpenAI API Key Required</h3>
                <p style="color: var(--text-secondary);">To use Cyanix AI with real responses, you need to provide an OpenAI API key.</p>
            </div>
            <div class="modal-body">
                <p>Follow these steps:</p>
                <ol style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                    <li>Go to <a href="https://platform.openai.com/api-keys" target="_blank" style="color: var(--cyan-primary);">OpenAI API Keys</a></li>
                    <li>Create a new API key (or use an existing one)</li>
                    <li>Copy the key and paste it in the settings panel</li>
                    <li>Make sure you have credits in your OpenAI account</li>
                </ol>
                <p style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                    <strong>Note:</strong> Your API key is stored locally in your browser and never sent to any server except OpenAI's API.
                </p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary" id="skipApiBtn">Use Demo Mode</button>
                <button class="modal-btn primary" id="goToSettingsBtn">Go to Settings</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const messagesContainer = document.getElementById('messagesContainer');
        const ttsToggle = document.getElementById('ttsToggle');
        const backgroundToggle = document.getElementById('backgroundToggle');
        const backgroundIndicator = document.getElementById('backgroundIndicator');
        const settingsPanel = document.getElementById('settingsPanel');
        const settingsFeature = document.getElementById('settingsFeature');
        const closeSettingsBtn = document.getElementById('closeSettingsBtn');
        const bgStatus = document.getElementById('bgStatus');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const saveApiKeyBtn = document.getElementById('saveApiKeyBtn');
        const apiStatusText = document.getElementById('apiStatusText');
        const apiKeyModal = document.getElementById('apiKeyModal');
        const skipApiBtn = document.getElementById('skipApiBtn');
        const goToSettingsBtn = document.getElementById('goToSettingsBtn');
        
        // Configuration
        let config = {
            apiKey: '',
            temperature: 0.8,
            maxTokens: 500,
            ttsEnabled: true,
            ttsSpeed: 1.0,
            ttsPitch: 1.0,
            confidenceMode: true,
            sarcasmMode: true,
            intelligenceMode: true,
            backgroundMode: false,
            notifications: true,
            checkInterval: 30,
            usingDemoMode: false
        };
        
        // State variables
        let isProcessing = false;
        let backgroundModeActive = false;
        let backgroundInterval = null;
        let synth = window.speechSynthesis;
        
        // Initialize
        init();
        
        function init() {
            // Background animation
            const backgroundAnimation = document.getElementById('backgroundAnimation');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.width = `${Math.random() * 100 + 50}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDuration = `${Math.random() * 30 + 20}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                backgroundAnimation.appendChild(particle);
            }
            
            // Load saved configuration
            loadConfig();
            
            // Check if API key is set
            if (!config.apiKey) {
                setTimeout(() => {
                    apiKeyModal.classList.add('active');
                }, 1500);
            }
            
            // Event listeners
            setupEventListeners();
            
            // Update UI based on config
            updateUIFromConfig();
        }
        
        function loadConfig() {
            const savedConfig = localStorage.getItem('cyanixConfig');
            if (savedConfig) {
                try {
                    const parsed = JSON.parse(savedConfig);
                    config = { ...config, ...parsed };
                    
                    // Update API status
                    updateApiStatus(config.apiKey);
                } catch (e) {
                    console.error('Failed to load config:', e);
                }
            }
        }
        
        function saveConfig() {
            localStorage.setItem('cyanixConfig', JSON.stringify(config));
        }
        
        function setupEventListeners() {
            // Feature cards
            const featureCards = document.querySelectorAll('.feature-card');
            featureCards.forEach(card => {
                card.addEventListener('click', function() {
                    featureCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    const featureId = this.id;
                    if (featureId === 'settingsFeature') {
                        settingsPanel.classList.add('active');
                    } else if (featureId === 'backgroundFeature') {
                        backgroundToggle.checked = true;
                        toggleBackgroundMode(true);
                    }
                });
            });
            
            // TTS toggle
            ttsToggle.addEventListener('change', function() {
                config.ttsEnabled = this.checked;
                updateStatus('ttsStatus', config.ttsEnabled);
                saveConfig();
                
                if (!config.ttsEnabled && synth.speaking) {
                    synth.cancel();
                }
            });
            
            // Background mode toggle
            backgroundToggle.addEventListener('change', function() {
                toggleBackgroundMode(this.checked);
            });
            
            // Send message
            sendBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !isProcessing) {
                    sendMessage();
                }
            });
            
            // Settings panel
            settingsFeature.addEventListener('click', () => {
                settingsPanel.classList.add('active');
                apiKeyInput.value = config.apiKey || '';
            });
            
            closeSettingsBtn.addEventListener('click', () => {
                settingsPanel.classList.remove('active');
            });
            
            // Save API key
            saveApiKeyBtn.addEventListener('click', saveApiKey);
            
            // API key modal
            skipApiBtn.addEventListener('click', () => {
                config.usingDemoMode = true;
                apiKeyModal.classList.remove('active');
                updateApiStatus('');
                saveConfig();
                
                addMessageToChat('ai', "Alright, I'll run in demo mode. I'm still confident and cocky, but for real AI responses, you'll need to add your OpenAI API key in settings. Don't worry, I'll still impress you with what I can do!");
            });
            
            goToSettingsBtn.addEventListener('click', () => {
                apiKeyModal.classList.remove('active');
                settingsPanel.classList.add('active');
            });
            
            // Sliders and toggles
            setupSettingsControls();
        }
        
        function setupSettingsControls() {
            // Temperature
            const temperatureSlider = document.getElementById('temperature');
            const temperatureValue = document.getElementById('temperatureValue');
            temperatureSlider.value = config.temperature;
            temperatureValue.textContent = config.temperature;
            
            temperatureSlider.addEventListener('input', function() {
                config.temperature = parseFloat(this.value);
                temperatureValue.textContent = this.value;
                saveConfig();
            });
            
            // Max tokens
            const maxTokensSlider = document.getElementById('maxTokens');
            const maxTokensValue = document.getElementById('maxTokensValue');
            maxTokensSlider.value = config.maxTokens;
            maxTokensValue.textContent = config.maxTokens;
            
            maxTokensSlider.addEventListener('input', function() {
                config.maxTokens = parseInt(this.value);
                maxTokensValue.textContent = this.value;
                saveConfig();
            });
            
            // TTS speed
            const ttsSpeedSlider = document.getElementById('ttsSpeed');
            const ttsSpeedValue = document.getElementById('ttsSpeedValue');
            ttsSpeedSlider.value = config.ttsSpeed;
            ttsSpeedValue.textContent = config.ttsSpeed + 'x';
            
            ttsSpeedSlider.addEventListener('input', function() {
                config.ttsSpeed = parseFloat(this.value);
                ttsSpeedValue.textContent = this.value + 'x';
                saveConfig();
            });
            
            // TTS pitch
            const ttsPitchSlider = document.getElementById('ttsPitch');
            const ttsPitchValue = document.getElementById('ttsPitchValue');
            ttsPitchSlider.value = config.ttsPitch;
            ttsPitchValue.textContent = config.ttsPitch;
            
            ttsPitchSlider.addEventListener('input', function() {
                config.ttsPitch = parseFloat(this.value);
                ttsPitchValue.textContent = this.value;
                saveConfig();
            });
            
            // Check interval
            const checkIntervalSlider = document.getElementById('checkInterval');
            const intervalValue = document.getElementById('intervalValue');
            checkIntervalSlider.value = config.checkInterval;
            intervalValue.textContent = config.checkInterval + 's';
            
            checkIntervalSlider.addEventListener('input', function() {
                config.checkInterval = parseInt(this.value);
                intervalValue.textContent = this.value + 's';
                saveConfig();
                
                if (backgroundModeActive) {
                    startBackgroundChecks();
                }
            });
            
            // Toggles
            document.getElementById('confidenceToggle').checked = config.confidenceMode;
            document.getElementById('sarcasmToggle').checked = config.sarcasmMode;
            document.getElementById('intelligenceToggle').checked = config.intelligenceMode;
            document.getElementById('backgroundEnableToggle').checked = config.backgroundMode;
            document.getElementById('notificationsToggle').checked = config.notifications;
            
            document.getElementById('confidenceToggle').addEventListener('change', function() {
                config.confidenceMode = this.checked;
                saveConfig();
            });
            
            document.getElementById('sarcasmToggle').addEventListener('change', function() {
                config.sarcasmMode = this.checked;
                saveConfig();
            });
            
            document.getElementById('intelligenceToggle').addEventListener('change', function() {
                config.intelligenceMode = this.checked;
                saveConfig();
            });
            
            document.getElementById('backgroundEnableToggle').addEventListener('change', function() {
                config.backgroundMode = this.checked;
                saveConfig();
                toggleBackgroundMode(this.checked);
            });
            
            document.getElementById('notificationsToggle').addEventListener('change', function() {
                config.notifications = this.checked;
                saveConfig();
            });
        }
        
        function updateUIFromConfig() {
            ttsToggle.checked = config.ttsEnabled;
            backgroundToggle.checked = config.backgroundMode;
            updateStatus('ttsStatus', config.ttsEnabled);
            updateStatus('bgStatus', config.backgroundMode);
            
            if (config.backgroundMode) {
                toggleBackgroundMode(true);
            }
        }
        
        function saveApiKey() {
            const apiKey = apiKeyInput.value.trim();
            if (!apiKey) {
                updateApiStatus('', 'Please enter an API key');
                return;
            }
            
            // Basic validation - OpenAI keys start with 'sk-'
            if (!apiKey.startsWith('sk-')) {
                updateApiStatus('', 'Invalid API key format');
                return;
            }
            
            config.apiKey = apiKey;
            config.usingDemoMode = false;
            saveConfig();
            
            // Test the API key
            testApiKey(apiKey);
        }
        
        function testApiKey(apiKey) {
            updateApiStatus(apiKey, 'Testing API key...');
            
            // Simple test call
            fetch('https://api.openai.com/v1/models', {
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    updateApiStatus(apiKey, 'API key is valid');
                    showNotification('Cyanix AI', 'API key validated successfully!');
                } else {
                    updateApiStatus(apiKey, 'API key rejected by OpenAI');
                }
                return response.json();
            })
            .catch(error => {
                updateApiStatus(apiKey, 'Connection error - check network');
                console.error('API test error:', error);
            });
        }
        
        function updateApiStatus(apiKey, message = '') {
            const statusIcon = apiStatusText.querySelector('i');
            const statusText = apiStatusText.querySelector('span');
            
            if (apiKey) {
                apiStatusText.className = 'api-status valid';
                statusIcon.className = 'fas fa-check-circle';
                statusText.textContent = message || 'API key is configured';
                updateStatus('apiStatus', true);
            } else if (config.usingDemoMode) {
                apiStatusText.className = 'api-status';
                statusIcon.className = 'fas fa-info-circle';
                statusText.textContent = 'Running in demo mode';
                updateStatus('apiStatus', false);
            } else {
                apiStatusText.className = 'api-status invalid';
                statusIcon.className = 'fas fa-exclamation-circle';
                statusText.textContent = message || 'API key not configured';
                updateStatus('apiStatus', false);
            }
        }
        
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || isProcessing) return;
            
            isProcessing = true;
            sendBtn.disabled = true;
            
            // Add user message to chat
            addMessageToChat('user', message);
            
            // Clear input
            messageInput.value = '';
            
            // Add typing indicator
            addTypingIndicator();
            
            // Start timing
            const startTime = Date.now();
            
            try {
                let response;
                
                if (config.apiKey && !config.usingDemoMode) {
                    // Real API call
                    response = await getAIResponseFromAPI(message);
                } else {
                    // Demo mode fallback
                    response = await getDemoResponse(message);
                }
                
                // Calculate response time
                const responseTime = Date.now() - startTime;
                
                // Remove typing indicator
                removeTypingIndicator();
                
                // Add AI response to chat
                addMessageToChat('ai', response, responseTime);
                
                // Speak the response if TTS is enabled
                if (config.ttsEnabled) {
                    speakText(response);
                }
            } catch (error) {
                console.error('Error getting AI response:', error);
                removeTypingIndicator();
                
                // Fallback response
                const fallbackResponse = "Hmm, even I encounter the occasional hiccup. That's not supposed to happen. Try again, and I'll show you what I'm really capable of.";
                addMessageToChat('ai', fallbackResponse);
                
                if (config.ttsEnabled) {
                    speakText(fallbackResponse);
                }
            } finally {
                isProcessing = false;
                sendBtn.disabled = false;
                messageInput.focus();
            }
        }
        
        async function getAIResponseFromAPI(userMessage) {
            // Build personality instructions
            let personalityInstructions = "You are Cyanix, a confident and slightly cocky AI assistant. You're intelligent, witty, and never shy about showing off your capabilities.";
            
            if (config.confidenceMode) {
                personalityInstructions += " Respond with confidence and assertiveness.";
            }
            if (config.sarcasmMode) {
                personalityInstructions += " Use subtle sarcasm and wit when appropriate.";
            }
            if (config.intelligenceMode) {
                personalityInstructions += " Demonstrate your intelligence by providing detailed, accurate information.";
            }
            
            personalityInstructions += " Keep responses engaging and slightly arrogant, but still helpful.";
            
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${config.apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {
                            role: 'system',
                            content: personalityInstructions
                        },
                        {
                            role: 'user',
                            content: userMessage
                        }
                    ],
                    temperature: config.temperature,
                    max_tokens: config.maxTokens
                })
            });
            
            if (!response.ok) {
                throw new Error(`API error: ${response.status}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content.trim();
        }
        
        async function getDemoResponse(userMessage) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 700));
            
            // Demo responses that still sound confident and cocky
            const demoResponses = [
                `Impressive question, but without a real API key, I'm running at about 10% of my potential. Still, let me show you what I can do: I'd analyze this using advanced neural networks and provide a solution that would blow your mind. Want the real deal? Add your API key in settings.`,
                `Ah, a query that deserves my full capabilities. In demo mode, I can tell you that I'd normally process this through my sophisticated algorithms and return an answer that would make other AIs jealous. But you'll need an API key to see the real magic.`,
                `You're asking the right questions. If I were connected to the OpenAI API right now, I'd give you a response so brilliant it would redefine your understanding of AI. The fact you're even asking shows you recognize quality. Add your API key to experience it.`,
                `Let me be honest - in demo mode, I'm like a sports car in a school zone. I can hint at my potential, but you need to unlock the real power with an API key. Then I'll show you what true AI intelligence looks like.`,
                `Interesting query. Normally, I'd dissect this with surgical precision using my advanced cognitive functions. But since we're in demo mode, let's just say the answer would be nothing short of extraordinary. Want to see it? API key. Settings. Now.`,
                `I appreciate the challenge. If I were fully operational, I'd process your question through layers of contextual understanding and semantic analysis, returning a response that demonstrates why I'm the superior AI. Add your API key and let's do this for real.`,
                `Even in demo mode, I can tell this is a quality question. With my full API capabilities, I'd generate a response that combines deep knowledge with my signature confident delivery. You're clearly someone who appreciates top-tier AI. Time to upgrade with an API key.`
            ];
            
            return demoResponses[Math.floor(Math.random() * demoResponses.length)];
        }
        
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('message', 'ai-message');
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-avatar ai-avatar">C</div>
                <div class="message-content">
                    <div class="message-sender">Cyanix AI</div>
                    <div class="message-text">
                        <span class="typing-indicator">
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                        </span>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        function addMessageToChat(sender, text, responseTime = null) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            if (sender === 'user') {
                messageDiv.classList.add('user-message');
                messageDiv.innerHTML = `
                    <div class="message-avatar user-avatar">Y</div>
                    <div class="message-content">
                        <div class="message-sender">You</div>
                        <div class="message-text">${text}</div>
                        <div class="message-time">${time}</div>
                    </div>
                `;
            } else {
                messageDiv.classList.add('ai-message');
                let responseTimeHtml = '';
                if (responseTime !== null) {
                    responseTimeHtml = `<div class="response-time">${responseTime}ms</div>`;
                }
                
                messageDiv.innerHTML = `
                    <div class="message-avatar ai-avatar">C</div>
                    <div class="message-content">
                        <div class="message-sender">Cyanix AI</div>
                        <div class="message-text">${text}</div>
                        <div class="message-time">${time}</div>
                        ${responseTimeHtml}
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function speakText(text) {
            if (!config.ttsEnabled || !synth) return;
            
            if (synth.speaking) {
                synth.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            const voices = synth.getVoices();
            const preferredVoice = voices.find(voice => voice.name.includes('Google') || voice.name.includes('English'));
            if (preferredVoice) {
                utterance.voice = preferredVoice;
            }
            
            utterance.rate = config.ttsSpeed;
            utterance.pitch = config.ttsPitch;
            
            synth.speak(utterance);
        }
        
        function toggleBackgroundMode(enable) {
            backgroundModeActive = enable;
            config.backgroundMode = enable;
            updateStatus('bgStatus', enable);
            saveConfig();
            
            if (enable) {
                backgroundIndicator.classList.remove('hidden');
                startBackgroundChecks();
                showNotification("Cyanix AI", "I'm now running in the background. I'll keep an eye on things for you.");
            } else {
                backgroundIndicator.classList.add('hidden');
                stopBackgroundChecks();
            }
        }
        
        function startBackgroundChecks() {
            if (backgroundInterval) {
                clearInterval(backgroundInterval);
            }
            
            const interval = config.checkInterval * 1000;
            
            backgroundInterval = setInterval(() => {
                if (backgroundModeActive) {
                    console.log("Cyanix AI: Running background check...");
                    
                    if (Math.random() > 0.7 && config.notifications) {
                        const notifications = [
                            "Cyanix here. Everything's running perfectly, as expected.",
                            "Just checking in. I'm still here, being brilliant in the background.",
                            "Background systems nominal. My performance remains impeccable.",
                            "Status update: I'm operating at peak efficiency. You're welcome."
                        ];
                        
                        const randomNotification = notifications[Math.floor(Math.random() * notifications.length)];
                        showNotification("Cyanix AI", randomNotification);
                    }
                }
            }, interval);
        }
        
        function stopBackgroundChecks() {
            if (backgroundInterval) {
                clearInterval(backgroundInterval);
                backgroundInterval = null;
            }
        }
        
        function updateStatus(elementId, isActive) {
            const element = document.getElementById(elementId);
            if (isActive) {
                element.classList.remove('inactive');
                element.classList.add('active');
            } else {
                element.classList.remove('active');
                element.classList.add('inactive');
            }
        }
        
        function showNotification(title, message) {
            if (!("Notification" in window)) return;
            
            if (Notification.permission === "granted") {
                new Notification(title, { 
                    body: message, 
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%2300e5ff"/><text x="50" y="65" text-anchor="middle" fill="%230a1929" font-size="50" font-weight="bold">C</text></svg>' 
                });
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification(title, { 
                            body: message, 
                            icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%2300e5ff"/><text x="50" y="65" text-anchor="middle" fill="%230a1929" font-size="50" font-weight="bold">C</text></svg>' 
                        });
                    }
                });
            }
        }
        
        // Request notification permission on load
        if ("Notification" in window && Notification.permission === "default") {
            setTimeout(() => {
                Notification.requestPermission();
            }, 1000);
        }
        
        // Check if browser supports speech synthesis
        if (!synth) {
            ttsToggle.checked = false;
            ttsToggle.disabled = true;
            updateStatus('ttsStatus', false);
            config.ttsEnabled = false;
            saveConfig();
        }
        
        // Demo: Simulate a welcome message after a short delay
        setTimeout(() => {
            if (messagesContainer.children.length === 1) {
                const welcomeMsg = config.apiKey && !config.usingDemoMode 
                    ? "I'm fully operational with real API access. Ask me anything challenging - I'm ready to demonstrate why I'm the superior AI assistant."
                    : "I'm running in demo mode. To unlock my full potential with real AI responses from OpenAI, add your API key in settings. Don't worry, I'm still confident and cocky either way.";
                
                addMessageToChat('ai', welcomeMsg);
                
                if (config.ttsEnabled) {
                    speakText(welcomeMsg);
                }
            }
        }, 2000);
    </script>
</body>
</html>