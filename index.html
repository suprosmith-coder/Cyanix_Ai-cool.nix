<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyanix AI | Advanced App Interface</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #00b4d8;
            --primary-dark: #0096c7;
            --primary-light: #90e0ef;
            --secondary: #caf0f8;
            --dark: #03045e;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --gray-dark: #495057;
            --success: #38b000;
            --warning: #ffb703;
            --error: #e63946;
            --sidebar-width: 280px;
            --header-height: 70px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.12);
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --border-radius-lg: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f7ff 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* App Container */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100%;
            background: white;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            border-radius: var(--border-radius-lg);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .app-header {
            height: var(--header-height);
            background: white;
            border-bottom: 1px solid var(--gray-light);
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 12px;
            color: var(--gray);
            letter-spacing: 0.5px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(56, 176, 0, 0.1);
            border-radius: 20px;
            color: var(--success);
            font-size: 14px;
            font-weight: 600;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .header-btn {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: 1px solid var(--gray-light);
            background: white;
            color: var(--gray-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .header-btn:hover {
            background: var(--gray-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .header-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--light);
            border-right: 1px solid var(--gray-light);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }

        .sidebar-header {
            padding: 25px 20px 15px;
            border-bottom: 1px solid var(--gray-light);
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .model-selector {
            background: white;
            border-radius: var(--border-radius-sm);
            padding: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 10px;
        }

        .model-selector select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 14px;
            background: white;
            color: var(--dark);
            cursor: pointer;
            transition: var(--transition);
        }

        .model-selector select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 180, 216, 0.1);
        }

        .conversation-list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .conversation-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: white;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            border-left: 3px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .conversation-item:hover {
            transform: translateX(3px);
            box-shadow: var(--shadow);
        }

        .conversation-item.active {
            border-left-color: var(--primary);
            background: var(--secondary);
        }

        .conv-preview {
            font-size: 14px;
            color: var(--dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 160px;
        }

        .conv-time {
            font-size: 12px;
            color: var(--gray);
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--gray-light);
        }

        .new-chat-btn {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 180, 216, 0.3);
        }

        .new-chat-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 180, 216, 0.4);
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #fcfdff;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .user .message-avatar {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .ai .message-avatar {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
        }

        .message-content {
            padding: 16px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
        }

        .user .message-content {
            background: var(--primary);
            color: white;
            border-top-right-radius: 5px;
        }

        .ai .message-content {
            background: white;
            color: var(--dark);
            border-top-left-radius: 5px;
            border: 1px solid var(--gray-light);
        }

        .message-text {
            line-height: 1.6;
            font-size: 15px;
        }

        .message-time {
            font-size: 11px;
            margin-top: 8px;
            opacity: 0.7;
            text-align: right;
        }

        .ai .message-time {
            color: var(--gray);
        }

        .user .message-time {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Chat Input */
        .chat-input-container {
            padding: 20px 30px;
            border-top: 1px solid var(--gray-light);
            background: white;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            gap: 15px;
        }

        .message-input {
            flex: 1;
            padding: 16px 20px;
            padding-right: 50px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 15px;
            resize: none;
            max-height: 120px;
            transition: var(--transition);
            background: var(--light);
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 180, 216, 0.1);
            background: white;
        }

        .send-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 180, 216, 0.3);
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 180, 216, 0.4);
        }

        /* Settings Panel - App Style */
        .settings-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 450px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .settings-panel.active {
            transform: translateX(0);
        }

        .settings-header {
            padding: 25px 30px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
        }

        .settings-header h2 {
            font-size: 24px;
            color: var(--dark);
            font-weight: 700;
        }

        .close-settings {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: 1px solid var(--gray-light);
            background: white;
            color: var(--gray-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .close-settings:hover {
            background: var(--gray-light);
            transform: rotate(90deg);
        }

        .settings-tabs {
            display: flex;
            background: var(--light);
            padding: 0 30px;
            border-bottom: 1px solid var(--gray-light);
        }

        .settings-tab {
            padding: 18px 0;
            margin-right: 30px;
            background: none;
            border: none;
            color: var(--gray);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }

        .settings-tab:hover {
            color: var(--primary);
        }

        .settings-tab.active {
            color: var(--primary);
        }

        .settings-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px 3px 0 0;
        }

        .settings-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .settings-section {
            margin-bottom: 35px;
        }

        .settings-section h3 {
            font-size: 18px;
            color: var(--dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-section h3 i {
            color: var(--primary);
            width: 24px;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .setting-label span {
            font-weight: 600;
            color: var(--dark);
        }

        .setting-value {
            font-size: 14px;
            color: var(--primary);
            font-weight: 600;
        }

        .setting-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 14px;
            transition: var(--transition);
            background: white;
        }

        .setting-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 180, 216, 0.1);
        }

        .slider-container {
            position: relative;
            padding: 8px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: var(--gray-light);
            border-radius: 3px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .api-key-group {
            position: relative;
        }

        .api-key-input {
            padding-right: 50px;
        }

        .toggle-visibility {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .toggle-visibility:hover {
            background: var(--gray-light);
            color: var(--dark);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-light);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .checkbox.checked {
            background: var(--primary);
            border-color: var(--primary);
        }

        .checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .checkbox-label {
            font-size: 14px;
            color: var(--dark);
        }

        .hint-text {
            font-size: 13px;
            color: var(--gray);
            margin-top: 8px;
            line-height: 1.5;
        }

        .settings-footer {
            padding: 25px 30px;
            border-top: 1px solid var(--gray-light);
            background: white;
            display: flex;
            gap: 15px;
        }

        .save-btn {
            flex: 1;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 180, 216, 0.3);
        }

        .save-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 180, 216, 0.4);
        }

        .cancel-btn {
            flex: 1;
            padding: 16px;
            background: white;
            color: var(--gray-dark);
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }

        .cancel-btn:hover {
            background: var(--gray-light);
            transform: translateY(-2px);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Loading Animation */
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px 20px;
            background: white;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-light);
            width: fit-content;
            box-shadow: var(--shadow);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: translateY(0); opacity: 0.5; }
            40% { transform: translateY(-10px); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .settings-panel {
                width: 400px;
            }
            
            .sidebar {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                border-radius: 0;
                height: 100vh;
            }
            
            .sidebar {
                position: fixed;
                left: -280px;
                top: 0;
                height: 100%;
                z-index: 100;
                background: white;
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .settings-panel {
                width: 100%;
            }
            
            .settings-tabs {
                overflow-x: auto;
                padding: 0 20px;
            }
            
            .settings-tab {
                margin-right: 20px;
                white-space: nowrap;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="app-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="logo-text">
                        <div class="logo-title">Cyanix AI</div>
                        <div class="logo-subtitle">Advanced Groq Interface</div>
                    </div>
                </div>
                
                <div class="header-controls">
                    <div class="status-badge">
                        <div class="status-dot"></div>
                        <span>API Connected</span>
                    </div>
                    
                    <button class="header-btn" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <button class="header-btn" id="settingsToggle">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </header>

            <!-- Chat Container -->
            <div class="chat-container">
                <!-- Sidebar -->
                <div class="sidebar" id="sidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-title">AI Model</div>
                        <div class="model-selector">
                            <select id="modelSelect">
                                <option value="llama3-70b-8192">Llama 3 70B (Groq)</option>
                                <option value="mixtral-8x7b-32768">Mixtral 8x7B (Groq)</option>
                                <option value="gemma-7b-it">Gemma 7B (Groq)</option>
                                <option value="llama3-8b-8192">Llama 3 8B (Groq)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="conversation-list" id="conversationList">
                        <!-- Conversations will be loaded here -->
                    </div>
                    
                    <div class="sidebar-footer">
                        <button class="new-chat-btn" id="newChatBtn">
                            <i class="fas fa-plus"></i>
                            <span>New Chat</span>
                        </button>
                    </div>
                </div>

                <!-- Chat Area -->
                <div class="chat-area">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will appear here -->
                        <div class="message ai">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <div class="message-text">
                                    <p>Hello! I'm Cyanix AI, your advanced assistant powered by Groq's lightning-fast inference engine. I'm here to help with any questions, tasks, or creative projects you have. What can I assist you with today?</p>
                                </div>
                                <div class="message-time">Just now</div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-input-container">
                        <div class="input-wrapper">
                            <textarea class="message-input" id="messageInput" placeholder="Type your message here... (Press Enter to send, Shift+Enter for new line)" rows="1"></textarea>
                            <button class="send-btn" id="sendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <h2>Configuration</h2>
            <button class="close-settings" id="closeSettingsBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="settings-tabs">
            <button class="settings-tab active" data-tab="api">API Settings</button>
            <button class="settings-tab" data-tab="model">Model</button>
            <button class="settings-tab" data-tab="behavior">Behavior</button>
            <button class="settings-tab" data-tab="interface">Interface</button>
        </div>
        
        <div class="settings-content">
            <!-- API Settings Tab -->
            <div class="settings-section active" id="api-tab">
                <h3><i class="fas fa-key"></i> API Configuration</h3>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Groq API Key</span>
                    </div>
                    <div class="api-key-group">
                        <input type="password" class="setting-control api-key-input" id="apiKey" placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                        <button class="toggle-visibility" id="toggleVisibility">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="hint-text">
                        Your API key is stored locally in your browser and never sent to external servers.
                        <a href="https://console.groq.com" target="_blank" style="color: var(--primary); text-decoration: none; font-weight: 600;">Get your API key →</a>
                    </div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>API Endpoint</span>
                    </div>
                    <input type="text" class="setting-control" id="apiEndpoint" value="https://api.groq.com/openai/v1/chat/completions">
                    <div class="hint-text">Custom API endpoints are supported for advanced configurations.</div>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="saveApiKeyToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Save API key to browser</span>
                    </div>
                </div>
            </div>
            
            <!-- Model Settings Tab -->
            <div class="settings-section" id="model-tab">
                <h3><i class="fas fa-brain"></i> Model Parameters</h3>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Temperature</span>
                        <span class="setting-value" id="tempValue">0.7</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
                    </div>
                    <div class="hint-text">Controls randomness: Lower values make responses more deterministic, higher values more creative.</div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Max Tokens</span>
                        <span class="setting-value" id="tokensValue">1024</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="maxTokens" min="128" max="4096" step="128" value="1024">
                    </div>
                    <div class="hint-text">Maximum length of generated responses. Higher values allow longer answers but use more tokens.</div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Top P</span>
                        <span class="setting-value" id="topPValue">0.9</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="topP" min="0.1" max="1" step="0.1" value="0.9">
                    </div>
                    <div class="hint-text">Nucleus sampling: Only tokens with cumulative probability ≥ P are considered.</div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Frequency Penalty</span>
                        <span class="setting-value" id="freqValue">0.0</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="frequencyPenalty" min="-2" max="2" step="0.1" value="0.0">
                    </div>
                    <div class="hint-text">Positive values penalize new tokens based on their existing frequency in the text.</div>
                </div>
            </div>
            
            <!-- Behavior Settings Tab -->
            <div class="settings-section" id="behavior-tab">
                <h3><i class="fas fa-user-cog"></i> Assistant Behavior</h3>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>System Prompt</span>
                    </div>
                    <textarea class="setting-control" id="systemPrompt" rows="4" placeholder="Define how the assistant should behave...">You are Cyanix AI, a helpful and knowledgeable assistant powered by Groq. Provide accurate, concise, and helpful responses. If you're unsure about something, admit it rather than making up information.</textarea>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="enableContextToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Enable conversation context</span>
                    </div>
                    <div class="hint-text">When enabled, the AI will remember previous messages in the conversation.</div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Context Window</span>
                        <span class="setting-value" id="contextValue">4096</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="contextWindow" min="512" max="8192" step="512" value="4096">
                    </div>
                    <div class="hint-text">Maximum number of tokens to keep in conversation history.</div>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="streamingToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Enable streaming responses</span>
                    </div>
                    <div class="hint-text">Show responses as they're generated for a more natural feel.</div>
                </div>
            </div>
            
            <!-- Interface Settings Tab -->
            <div class="settings-section" id="interface-tab">
                <h3><i class="fas fa-palette"></i> Interface Preferences</h3>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Theme</span>
                    </div>
                    <select class="setting-control" id="themeSelect">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="auto">Auto (System)</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="animationsToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Enable animations</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="sidebarToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Show sidebar by default</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <div class="setting-label">
                        <span>Message Density</span>
                    </div>
                    <select class="setting-control" id="densitySelect">
                        <option value="compact">Compact</option>
                        <option value="normal" selected>Normal</option>
                        <option value="comfortable">Comfortable</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <div class="checkbox-group" id="markdownToggle">
                        <div class="checkbox checked"></div>
                        <span class="checkbox-label">Render Markdown in responses</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="settings-footer">
            <button class="cancel-btn" id="cancelSettingsBtn">
                <i class="fas fa-times"></i>
                Cancel
            </button>
            <button class="save-btn" id="saveSettingsBtn">
                <i class="fas fa-save"></i>
                Save Changes
            </button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script>
        // DOM Elements
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatMessages = document.getElementById('chatMessages');
        const newChatBtn = document.getElementById('newChatBtn');
        const conversationList = document.getElementById('conversationList');
        const settingsToggle = document.getElementById('settingsToggle');
        const settingsPanel = document.getElementById('settingsPanel');
        const closeSettingsBtn = document.getElementById('closeSettingsBtn');
        const cancelSettingsBtn = document.getElementById('cancelSettingsBtn');
        const saveSettingsBtn = document.getElementById('saveSettingsBtn');
        const overlay = document.getElementById('overlay');
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        
        // Settings tabs
        const settingsTabs = document.querySelectorAll('.settings-tab');
        const settingsSections = document.querySelectorAll('.settings-section');
        
        // Settings controls
        const apiKeyInput = document.getElementById('apiKey');
        const toggleVisibilityBtn = document.getElementById('toggleVisibility');
        const temperatureSlider = document.getElementById('temperature');
        const tempValue = document.getElementById('tempValue');
        const maxTokensSlider = document.getElementById('maxTokens');
        const tokensValue = document.getElementById('tokensValue');
        const topPSlider = document.getElementById('topP');
        const topPValue = document.getElementById('topPValue');
        const frequencyPenaltySlider = document.getElementById('frequencyPenalty');
        const freqValue = document.getElementById('freqValue');
        const contextWindowSlider = document.getElementById('contextWindow');
        const contextValue = document.getElementById('contextValue');
        const modelSelect = document.getElementById('modelSelect');
        const systemPrompt = document.getElementById('systemPrompt');
        
        // Toggle elements
        const saveApiKeyToggle = document.getElementById('saveApiKeyToggle');
        const enableContextToggle = document.getElementById('enableContextToggle');
        const streamingToggle = document.getElementById('streamingToggle');
        const animationsToggle = document.getElementById('animationsToggle');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const markdownToggle = document.getElementById('markdownToggle');

        // State
        let currentConversationId = 'conv_' + Date.now();
        let conversations = [];
        let isTyping = false;
        let settingsChanged = false;

        // Initialize app
        function init() {
            loadSettings();
            loadConversations();
            setupEventListeners();
            renderConversationList();
            
            // Set initial active tab
            switchTab('api');
        }

        // Load settings from localStorage
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('cyanix_settings')) || {};
            
            // API Settings
            apiKeyInput.value = settings.apiKey || '';
            document.getElementById('apiEndpoint').value = settings.apiEndpoint || 'https://api.groq.com/openai/v1/chat/completions';
            
            // Model Settings
            if (settings.temperature) {
                temperatureSlider.value = settings.temperature;
                tempValue.textContent = settings.temperature;
            }
            if (settings.maxTokens) {
                maxTokensSlider.value = settings.maxTokens;
                tokensValue.textContent = settings.maxTokens;
            }
            if (settings.topP) {
                topPSlider.value = settings.topP;
                topPValue.textContent = settings.topP;
            }
            if (settings.frequencyPenalty) {
                frequencyPenaltySlider.value = settings.frequencyPenalty;
                freqValue.textContent = settings.frequencyPenalty;
            }
            if (settings.contextWindow) {
                contextWindowSlider.value = settings.contextWindow;
                contextValue.textContent = settings.contextWindow;
            }
            
            // Behavior Settings
            if (settings.model) modelSelect.value = settings.model;
            if (settings.systemPrompt) systemPrompt.value = settings.systemPrompt;
            
            // Interface Settings
            if (settings.theme) document.getElementById('themeSelect').value = settings.theme;
            if (settings.density) document.getElementById('densitySelect').value = settings.density;
            
            // Toggle states
            setToggleState(saveApiKeyToggle, settings.saveApiKey !== false);
            setToggleState(enableContextToggle, settings.enableContext !== false);
            setToggleState(streamingToggle, settings.streaming !== false);
            setToggleState(animationsToggle, settings.animations !== false);
            setToggleState(sidebarToggle, settings.sidebar !== false);
            setToggleState(markdownToggle, settings.markdown !== false);
            
            // Apply theme if set
            if (settings.theme === 'dark') {
                document.documentElement.style.setProperty('--light', '#1a1a1a');
                document.documentElement.style.setProperty('--gray-light', '#2d2d2d');
                document.documentElement.style.setProperty('--dark', '#ffffff');
            }
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {
                // API Settings
                apiKey: apiKeyInput.value,
                apiEndpoint: document.getElementById('apiEndpoint').value,
                saveApiKey: getToggleState(saveApiKeyToggle),
                
                // Model Settings
                temperature: parseFloat(temperatureSlider.value),
                maxTokens: parseInt(maxTokensSlider.value),
                topP: parseFloat(topPSlider.value),
                frequencyPenalty: parseFloat(frequencyPenaltySlider.value),
                contextWindow: parseInt(contextWindowSlider.value),
                
                // Behavior Settings
                model: modelSelect.value,
                systemPrompt: systemPrompt.value,
                enableContext: getToggleState(enableContextToggle),
                streaming: getToggleState(streamingToggle),
                
                // Interface Settings
                theme: document.getElementById('themeSelect').value,
                density: document.getElementById('densitySelect').value,
                animations: getToggleState(animationsToggle),
                sidebar: getToggleState(sidebarToggle),
                markdown: getToggleState(markdownToggle)
            };
            
            localStorage.setItem('cyanix_settings', JSON.stringify(settings));
            
            // Show success feedback
            const originalText = saveSettingsBtn.innerHTML;
            saveSettingsBtn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            saveSettingsBtn.style.background = 'linear-gradient(to right, var(--success), #2a9d3f)';
            
            setTimeout(() => {
                saveSettingsBtn.innerHTML = originalText;
                saveSettingsBtn.style.background = 'linear-gradient(to right, var(--primary), var(--primary-dark))';
            }, 2000);
            
            settingsChanged = false;
        }

        // Load conversations from localStorage
        function loadConversations() {
            const savedConversations = localStorage.getItem('cyanix_conversations');
            if (savedConversations) {
                conversations = JSON.parse(savedConversations);
            } else {
                // Create initial conversation
                conversations = [{
                    id: currentConversationId,
                    timestamp: Date.now(),
                    title: 'Welcome to Cyanix AI',
                    messages: [
                        {
                            role: 'ai',
                            content: 'Hello! I\'m Cyanix AI, your advanced assistant powered by Groq\'s lightning-fast inference engine. I\'m here to help with any questions, tasks, or creative projects you have. What can I assist you with today?',
                            timestamp: Date.now()
                        }
                    ]
                }];
            }
        }

        // Render conversation list
        function renderConversationList() {
            conversationList.innerHTML = '';
            
            conversations.sort((a, b) => b.timestamp - a.timestamp).forEach(conv => {
                const convElement = document.createElement('div');
                convElement.className = 'conversation-item';
                if (conv.id === currentConversationId) {
                    convElement.classList.add('active');
                }
                
                const time = new Date(conv.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                convElement.innerHTML = `
                    <div class="conv-preview">${conv.title || 'New Conversation'}</div>
                    <div class="conv-time">${time}</div>
                `;
                
                convElement.addEventListener('click', () => {
                    loadConversation(conv.id);
                });
                
                conversationList.appendChild(convElement);
            });
        }

        // Load a conversation
        function loadConversation(conversationId) {
            currentConversationId = conversationId;
            const conversation = conversations.find(c => c.id === conversationId);
            
            if (!conversation) return;
            
            // Clear chat messages
            chatMessages.innerHTML = '';
            
            // Add messages to chat
            conversation.messages.forEach(msg => {
                addMessageToChat(msg.role, msg.content, false);
            });
            
            // Update conversation list
            renderConversationList();
            
            // Scroll to bottom
            scrollToBottom();
        }

        // Create a new conversation
        function createNewConversation() {
            currentConversationId = 'conv_' + Date.now();
            conversations.unshift({
                id: currentConversationId,
                timestamp: Date.now(),
                title: 'New Conversation',
                messages: [
                    {
                        role: 'ai',
                        content: 'Hello! I\'m Cyanix AI, your advanced assistant powered by Groq\'s lightning-fast inference engine. I\'m here to help with any questions, tasks, or creative projects you have. What can I assist you with today?',
                        timestamp: Date.now()
                    }
                ]
            });
            
            // Keep only the 20 most recent conversations
            if (conversations.length > 20) {
                conversations = conversations.slice(0, 20);
            }
            
            // Clear chat messages
            chatMessages.innerHTML = '';
            
            // Add welcome message
            addMessageToChat('ai', 'Hello! I\'m Cyanix AI, your advanced assistant powered by Groq\'s lightning-fast inference engine. I\'m here to help with any questions, tasks, or creative projects you have. What can I assist you with today?', false);
            
            // Update conversation list
            renderConversationList();
            
            // Save conversations
            localStorage.setItem('cyanix_conversations', JSON.stringify(conversations));
        }

        // Add message to chat UI
        function addMessageToChat(role, content, saveToHistory = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            let avatarIcon = 'fas fa-user';
            if (role === 'ai') avatarIcon = 'fas fa-robot';
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="${avatarIcon}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">
                        ${content}
                    </div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            // Add to chat
            chatMessages.appendChild(messageDiv);
            
            // Save to conversation history
            if (saveToHistory) {
                const conversation = conversations.find(c => c.id === currentConversationId);
                if (conversation) {
                    conversation.messages.push({ role, content, timestamp: Date.now() });
                    conversation.timestamp = Date.now();
                    
                    // Update conversation title if it's the first user message
                    if (role === 'user' && conversation.messages.filter(m => m.role === 'user').length === 1) {
                        conversation.title = content.substring(0, 50) + (content.length > 50 ? '...' : '');
                    }
                    
                    // Save conversations
                    localStorage.setItem('cyanix_conversations', JSON.stringify(conversations));
                    
                    // Update conversation list
                    renderConversationList();
                }
            }
            
            // Scroll to bottom
            scrollToBottom();
            
            return messageDiv;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(typingDiv);
            scrollToBottom();
            isTyping = true;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }

        // Scroll to bottom of chat
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Simulate API response
        async function getAIResponse(userMessage) {
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // Remove typing indicator
            removeTypingIndicator();
            
            // Return simulated response
            const responses = [
                "I understand your question. As an AI assistant powered by Groq's high-performance inference, I can process this request efficiently. The key considerations would be accuracy, relevance, and practical application. Would you like me to elaborate on any specific aspect?",
                "That's an interesting query! Based on my training data and the parameters set in your configuration, I'd approach this by breaking it down into manageable components. First, we need to establish the context, then identify the core requirements, and finally explore potential solutions.",
                "Thanks for your message! I'm analyzing this with the model parameters you've configured (temperature: " + temperatureSlider.value + ", max tokens: " + maxTokensSlider.value + "). This allows me to provide responses that balance creativity with coherence. Here's what I think based on the information provided...",
                "I've processed your request using the " + modelSelect.options[modelSelect.selectedIndex].text + " model. Given the current configuration, I'd recommend a structured approach that addresses the main points while maintaining flexibility for adjustments as new information emerges."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Send message
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || isTyping) return;
            
            // Clear input
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Add user message to chat
            addMessageToChat('user', message);
            
            // Get AI response
            const aiResponse = await getAIResponse(message);
            
            // Add AI response to chat
            addMessageToChat('ai', aiResponse);
        }

        // Switch settings tab
        function switchTab(tabName) {
            // Update tabs
            settingsTabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update sections
            settingsSections.forEach(section => {
                if (section.id === tabName + '-tab') {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
        }

        // Toggle helper functions
        function setToggleState(toggleElement, state) {
            const checkbox = toggleElement.querySelector('.checkbox');
            if (state) {
                checkbox.classList.add('checked');
            } else {
                checkbox.classList.remove('checked');
            }
        }

        function getToggleState(toggleElement) {
            const checkbox = toggleElement.querySelector('.checkbox');
            return checkbox.classList.contains('checked');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Send message
            sendBtn.addEventListener('click', sendMessage);
            
            messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
                
                // Auto-resize textarea
                setTimeout(() => {
                    messageInput.style.height = 'auto';
                    messageInput.style.height = (messageInput.scrollHeight) + 'px';
                }, 0);
            });
            
            // New chat
            newChatBtn.addEventListener('click', createNewConversation);
            
            // Settings panel
            settingsToggle.addEventListener('click', () => {
                settingsPanel.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            closeSettingsBtn.addEventListener('click', closeSettings);
            cancelSettingsBtn.addEventListener('click', closeSettings);
            overlay.addEventListener('click', closeSettings);
            
            // Save settings
            saveSettingsBtn.addEventListener('click', () => {
                saveSettings();
                setTimeout(closeSettings, 500);
            });
            
            // Menu toggle for mobile
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
            
            overlay.addEventListener('click', () => {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            });
            
            // Settings tabs
            settingsTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });
            
            // Toggle visibility for API key
            toggleVisibilityBtn.addEventListener('click', () => {
                const type = apiKeyInput.getAttribute('type') === 'password' ? 'text' : 'password';
                apiKeyInput.setAttribute('type', type);
                toggleVisibilityBtn.querySelector('i').className = type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';
            });
            
            // Slider value updates
            temperatureSlider.addEventListener('input', () => {
                tempValue.textContent = temperatureSlider.value;
                settingsChanged = true;
            });
            
            maxTokensSlider.addEventListener('input', () => {
                tokensValue.textContent = maxTokensSlider.value;
                settingsChanged = true;
            });
            
            topPSlider.addEventListener('input', () => {
                topPValue.textContent = topPSlider.value;
                settingsChanged = true;
            });
            
            frequencyPenaltySlider.addEventListener('input', () => {
                freqValue.textContent = frequencyPenaltySlider.value;
                settingsChanged = true;
            });
            
            contextWindowSlider.addEventListener('input', () => {
                contextValue.textContent = contextWindowSlider.value;
                settingsChanged = true;
            });
            
            // Toggle click handlers
            saveApiKeyToggle.addEventListener('click', () => {
                const current = getToggleState(saveApiKeyToggle);
                setToggleState(saveApiKeyToggle, !current);
                settingsChanged = true;
            });
            
            enableContextToggle.addEventListener('click', () => {
                const current = getToggleState(enableContextToggle);
                setToggleState(enableContextToggle, !current);
                settingsChanged = true;
            });
            
            streamingToggle.addEventListener('click', () => {
                const current = getToggleState(streamingToggle);
                setToggleState(streamingToggle, !current);
                settingsChanged = true;
            });
            
            animationsToggle.addEventListener('click', () => {
                const current = getToggleState(animationsToggle);
                setToggleState(animationsToggle, !current);
                settingsChanged = true;
            });
            
            sidebarToggle.addEventListener('click', () => {
                const current = getToggleState(sidebarToggle);
                setToggleState(sidebarToggle, !current);
                settingsChanged = true;
            });
            
            markdownToggle.addEventListener('click', () => {
                const current = getToggleState(markdownToggle);
                setToggleState(markdownToggle, !current);
                settingsChanged = true;
            });
            
            // Other inputs
            modelSelect.addEventListener('change', () => settingsChanged = true);
            systemPrompt.addEventListener('input', () => settingsChanged = true);
            document.getElementById('apiEndpoint').addEventListener('input', () => settingsChanged = true);
            document.getElementById('themeSelect').addEventListener('change', () => settingsChanged = true);
            document.getElementById('densitySelect').addEventListener('change', () => settingsChanged = true);
            
            // Prevent closing with unsaved changes
            window.addEventListener('beforeunload', (e) => {
                if (settingsChanged) {
                    e.preventDefault();
                    e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                }
            });
        }

        // Close settings panel
        function closeSettings() {
            settingsPanel.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            
            // If settings were changed but not saved, reload original settings
            if (settingsChanged) {
                loadSettings();
                settingsChanged = false;
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>